<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#e46652">

    <title>Ember.js - モデル: モデルの関連付け</title>
    <meta property="st:title" content="モデル: モデルの関連付け" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../../images/favicon.png" rel="icon" type="image/png" />
    <!--[if lte IE 7 ]><link href="../../stylesheets/fonts/fontello-ie7.css" rel="stylesheet" /><![endif]-->
    <link href="../../stylesheets/application.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <!-- This TypeKit account is managed by @wifelette. Contact her with any issues. -->
    <script src="https://use.typekit.net/stz3kpn.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

    <link href="/blog/feed.xml" rel="alternate" type="application/atom+xml" title="Ember.js - ブログ" />
    
  </head>

  <body class="guides models models_relationships models_relationships_index">

    <!--[if lt IE 9]>
      <script src="../../javascripts/common-old-ie.js"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
      <script src="../../javascripts/common-modern.js"></script>
    <!--<![endif]-->

    <header>
<nav class="navbar navbar-inverse">
 <div class="container">
  <div class="navbar-header">
   <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
        <span class="sr-only">切替</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
   <a class="navbar-brand" href="http://emberjs.com"><img src="https://glimmer-styleguide.global.ssl.fastly.net/glimmer-styleguide/master/images/ember-logo.svg" alt="home" /></a>
  </div>
  <div class="collapse navbar-collapse" id="navbar-collapse">
   <ul class="nav navbar-nav">
    <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">ドキュメント <span class="caret"></span></a>
     <ul class="dropdown-menu">
      <li><a href="http://emberjs.com/guides">ガイド</a></li>
      <li><a href="http://emberjs.com/api">APIリファレンス</a></li>
      <li role="separator" class="divider"></li>
      <li><a href="http://emberjs.com/learn">学ぶ</a></li>
     </ul>
    </li>
    <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">リリース <span class="caret"></span></a>
     <ul class="dropdown-menu">
      <li><a href="http://emberjs.com/builds">チャネル</a></li>
      <li><a href="http://emberjs.com/builds/release">-- ステーブル</a></li>
      <li><a href="http://emberjs.com/builds/beta">-- ベータ</a></li>
      <li><a href="http://emberjs.com/builds/canary">-- カナリア</a></li>
      <li role="separator" class="divider"></li>
      <li><a href="http://emberjs.com/deprecations">廃止予定</a></li>
      <li><a href="http://emberjs.com/statusboard">ステータスボード</a></li>
     </ul>
    </li>
    <li><a href="http://emberjs.com/blog">ブログ</a></li>
    <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">コミュニティ <span class="caret"></span></a>
     <ul class="dropdown-menu">
      <li><a href="http://emberjs.com/community">Emberコミュニティ</a></li>
       <li><a href="http://emberjs.com/guidelines">ガイドライン</a></li>
       <li><a href="http://github.com/emberjs/">貢献(Github)</a></li>
       <li role="separator" class="divider"></li>
       <li><a href="http://emberjs.com/community/meetups">イベント</a></li>
       <li><a href="http://jobs.emberjs.com/">採用情報</a></li>
       <li role="separator" class="divider"></li>
       <li><a href="http://emberconf.com/">Ember Conf</a></li>
     </ul>
     </li>
     <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About<span class="caret"></span></a>
      <ul class="dropdown-menu">
       <li><a href="http://emberjs.com/team">チーム</a></li>
       <li role="separator" class="divider"></li>
       <li><a href="http://emberjs.com/logos">ロゴ</a></li>
       <li><a href="http://emberjs.com/mascots">マスコット</a></li>
       <li role="separator" class="divider"></li>
       <li><a href="http://emberjs.com/ember-users">Ember採用企業</a></li>
       <li><a href="http://emberjs.com/sponsors">スポンサー</a></li>
       <li role="separator" class="divider"></li>
       <li><a href="http://emberjs.com/legal">法関連</a></li>
       <li><a href="http://emberjs.com/security">セキュリティ</a></li>
      </ul>
     </li>
   </ul>
   <form class="navbar-form navbar-right searchbox">
    <div class="input-group">
      <label for="search-input" class="control-label sr-only">検索</label>
        <input type="text"
        class="form-control search input ds-input"
        placeholder="検索..."
        id="search-input"
        role="combobox"
        aria-expanded="false"
        aria-owns="algolia-autocomplete-listbox-0"
        autocorrect="off"
        autocapitalize="none"
        spellcheck="false"
        />
        <span></span>
    </div>
   </form>
  </div>
  <!-- /.navbar-collapse -->
 </div>
 <!-- /.container-fluid -->
</nav>
</header>


    

    <main class="container">

      <aside class="sidebar">
  <input id="toc-toggle" class="toc-toggle visually-hidden" type="checkbox" />
  <label for="toc-toggle">目次 <span class="visually-hidden">切替</span></label>

  <nav class='toc-container' aria-label='table of contents'><ol class='toc-level-0 selected'><li class='toc-level-0 '><a href="#">はじめに</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../getting-started/quick-start/">クイックスタート</a></li><li class='toc-level-1 '><a href="../../getting-started/">Emberのインストール</a></li><li class='toc-level-1 '><a href="../../getting-started/core-concepts/">Emberのコアコンセプト</a></li><li class='toc-level-1 '><a href="../../getting-started/js-primer/">JavaScript手引き</a></li></ol></li><li class='toc-level-0 '><a href="#">チュートリアル</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../tutorial/ember-cli/">アプリの作成</a></li><li class='toc-level-1 '><a href="../../tutorial/acceptance-test/">プランニング</a></li><li class='toc-level-1 '><a href="../../tutorial/routes-and-templates/">ルートとテンプレート</a></li><li class='toc-level-1 '><a href="../../tutorial/model-hook/">モデルフック</a></li><li class='toc-level-1 '><a href="../../tutorial/installing-addons/">アドオンのインストール</a></li><li class='toc-level-1 '><a href="../../tutorial/simple-component/">コンポーネントの作成</a></li><li class='toc-level-1 '><a href="../../tutorial/hbs-helper/">ヘルパーの作成</a></li><li class='toc-level-1 '><a href="../../tutorial/ember-data/">Ember Dataを使う</a></li><li class='toc-level-1 '><a href="../../tutorial/autocomplete-component/">複雑なコンポーネントの作成</a></li><li class='toc-level-1 '><a href="../../tutorial/service/">サービスとユーティリティ</a></li><li class='toc-level-1 '><a href="../../tutorial/subroutes/">ネストしたルートの作成</a></li><li class='toc-level-1 '><a href="../../tutorial/deploying/">デプロイ</a></li></ol></li><li class='toc-level-0 '><a href="#">オブジェクトモデル</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../object-model/">Emberのオブジェクト</a></li><li class='toc-level-1 '><a href="../../object-model/classes-and-instances/">クラスとインスタンス</a></li><li class='toc-level-1 '><a href="../../object-model/reopening-classes-and-instances/">クラスとインスタンスの再オープン</a></li><li class='toc-level-1 '><a href="../../object-model/computed-properties/">算出プロパティ</a></li><li class='toc-level-1 '><a href="../../object-model/computed-properties-and-aggregate-data/">算出プロパティとデータ集計</a></li><li class='toc-level-1 '><a href="../../object-model/observers/">オブザーバー</a></li><li class='toc-level-1 '><a href="../../object-model/bindings/">バインディング</a></li><li class='toc-level-1 '><a href="../../object-model/enumerables/">列挙型</a></li></ol></li><li class='toc-level-0 '><a href="#">ルーティング</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../routing/">はじめに</a></li><li class='toc-level-1 '><a href="../../routing/defining-your-routes/">ルートの定義</a></li><li class='toc-level-1 '><a href="../../routing/specifying-a-routes-model/">ルートのモデルを指定する</a></li><li class='toc-level-1 '><a href="../../routing/rendering-a-template/">テンプレートの描画</a></li><li class='toc-level-1 '><a href="../../routing/redirection/">リダイレクション</a></li><li class='toc-level-1 '><a href="../../routing/preventing-and-retrying-transitions/">トランジションの中止と再開</a></li><li class='toc-level-1 '><a href="../../routing/loading-and-error-substates/">ロード中とエラーの表示</a></li><li class='toc-level-1 '><a href="../../routing/query-params/">クエリーパラメーター</a></li><li class='toc-level-1 '><a href="../../routing/asynchronous-routing/">非同期ルーティング</a></li></ol></li><li class='toc-level-0 '><a href="#">テンプレート</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../templates/handlebars-basics/">Handlebarsの基礎</a></li><li class='toc-level-1 '><a href="../../templates/built-in-helpers/">ビルトインヘルパー</a></li><li class='toc-level-1 '><a href="../../templates/conditionals/">条件分岐</a></li><li class='toc-level-1 '><a href="../../templates/displaying-a-list-of-items/">リストの表示</a></li><li class='toc-level-1 '><a href="../../templates/displaying-the-keys-in-an-object/">オブジェクトのキーの表示</a></li><li class='toc-level-1 '><a href="../../templates/binding-element-attributes/">要素の属性のバインディング</a></li><li class='toc-level-1 '><a href="../../templates/links/">リンク</a></li><li class='toc-level-1 '><a href="../../templates/actions/">アクション</a></li><li class='toc-level-1 '><a href="../../templates/input-helpers/">inputヘルパー</a></li><li class='toc-level-1 '><a href="../../templates/development-helpers/">開発用ヘルパー</a></li><li class='toc-level-1 '><a href="../../templates/writing-helpers/">ヘルパーの作成</a></li></ol></li><li class='toc-level-0 '><a href="#">コンポーネント</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../components/defining-a-component/">コンポーネントの定義</a></li><li class='toc-level-1 '><a href="../../components/the-component-lifecycle/">コンポーネントのライフサイクル</a></li><li class='toc-level-1 '><a href="../../components/passing-properties-to-a-component/">コンポーネントへのプロパティの受け渡し</a></li><li class='toc-level-1 '><a href="../../components/wrapping-content-in-a-component/">コンポーネント内のコンテンツをラップする</a></li><li class='toc-level-1 '><a href="../../components/customizing-a-components-element/">コンポーネントの要素のカスタマイズ</a></li><li class='toc-level-1 '><a href="../../components/block-params/">ブロック引数を使う</a></li><li class='toc-level-1 '><a href="../../components/handling-events/">イベント処理</a></li><li class='toc-level-1 '><a href="../../components/triggering-changes-with-actions/">アクションによる変更のトリガー</a></li></ol></li><li class='toc-level-0 '><a href="#">コントローラー</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../controllers/">はじめに</a></li></ol></li><li class='toc-level-0 selected'><a href="#">モデル</a><ol class='toc-level-1 selected'><li class='toc-level-1 '><a href="../">はじめに</a></li><li class='toc-level-1 '><a href="../defining-models/">モデルの定義</a></li><li class='toc-level-1 '><a href="../finding-records/">レコード検索</a></li><li class='toc-level-1 '><a href="../creating-updating-and-deleting-records/">作成、更新、削除</a></li><li class='toc-level-1 selected'><a href="./">モデルの関連付け</a></li><li class='toc-level-1 '><a href="../pushing-records-into-the-store/">レコードをストアにプッシュする</a></li><li class='toc-level-1 '><a href="../handling-metadata/">メタデータの処理</a></li><li class='toc-level-1 '><a href="../customizing-adapters/">アダプターのカスタマイズ</a></li><li class='toc-level-1 '><a href="../customizing-serializers/">シリアライザのカスタマイズ</a></li></ol></li><li class='toc-level-0 '><a href="#">アプリケーション関連</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../applications/applications-and-instances/">アプリケーションとインスタンス</a></li><li class='toc-level-1 '><a href="../../applications/dependency-injection/">依存性注入</a></li><li class='toc-level-1 '><a href="../../applications/initializers/">イニシャライザ</a></li><li class='toc-level-1 '><a href="../../applications/services/">サービス</a></li><li class='toc-level-1 '><a href="../../applications/run-loop/">ランループ</a></li></ol></li><li class='toc-level-0 '><a href="#">Testing</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../testing/">Introduction</a></li><li class='toc-level-1 '><a href="../../testing/acceptance/">Application Tests</a></li><li class='toc-level-1 '><a href="../../testing/unit-testing-basics/">Testing Basics</a></li><li class='toc-level-1 '><a href="../../testing/testing-components/">Testing Components</a></li><li class='toc-level-1 '><a href="../../testing/testing-helpers/">Testing Helpers</a></li><li class='toc-level-1 '><a href="../../testing/testing-controllers/">Testing Controllers</a></li><li class='toc-level-1 '><a href="../../testing/testing-routes/">Testing Routes</a></li><li class='toc-level-1 '><a href="../../testing/testing-models/">Testing Models</a></li></ol></li><li class='toc-level-0 '><a href="#">Ember Inspector</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../ember-inspector/">Introduction</a></li><li class='toc-level-1 '><a href="../../ember-inspector/installation/">Installing the Inspector</a></li><li class='toc-level-1 '><a href="../../ember-inspector/object-inspector/">Object Inspector</a></li><li class='toc-level-1 '><a href="../../ember-inspector/view-tree/">The View Tree</a></li><li class='toc-level-1 '><a href="../../ember-inspector/routes/">Inspecting Routes</a></li><li class='toc-level-1 '><a href="../../ember-inspector/data/">Data Tab</a></li><li class='toc-level-1 '><a href="../../ember-inspector/deprecations/">Tackling Deprecations</a></li><li class='toc-level-1 '><a href="../../ember-inspector/info/">Library Info</a></li><li class='toc-level-1 '><a href="../../ember-inspector/promises/">Debugging Promises</a></li><li class='toc-level-1 '><a href="../../ember-inspector/container/">Inspecting Objects via the Container</a></li><li class='toc-level-1 '><a href="../../ember-inspector/render-performance/">Rendering Performance</a></li><li class='toc-level-1 '><a href="../../ember-inspector/troubleshooting/">Troubleshooting</a></li></ol></li><li class='toc-level-0 '><a href="#">Addons and Dependencies</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../addons-and-dependencies/managing-dependencies/">Managing Dependencies</a></li></ol></li><li class='toc-level-0 '><a href="#">Configuring Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../configuring-ember/configuring-your-app/">Configuring Your App</a></li><li class='toc-level-1 '><a href="../../configuring-ember/configuring-ember-cli/">Configuring Ember CLI</a></li><li class='toc-level-1 '><a href="../../configuring-ember/handling-deprecations/">Handling Deprecations</a></li><li class='toc-level-1 '><a href="../../configuring-ember/disabling-prototype-extensions/">Disabling Prototype Extensions</a></li><li class='toc-level-1 '><a href="../../configuring-ember/specifying-url-type/">Specifying the URL Type</a></li><li class='toc-level-1 '><a href="../../configuring-ember/embedding-applications/">Embedding Applications</a></li><li class='toc-level-1 '><a href="../../configuring-ember/feature-flags/">Feature Flags</a></li><li class='toc-level-1 '><a href="../../configuring-ember/build-targets/">Build targets</a></li><li class='toc-level-1 '><a href="../../configuring-ember/debugging/">Debugging</a></li></ol></li><li class='toc-level-0 '><a href="#">Contributing to Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../contributing/adding-new-features/">Adding New Features</a></li><li class='toc-level-1 '><a href="../../contributing/repositories/">Repositories</a></li></ol></li><li class='toc-level-0 '><a href="#">Glossary</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../glossary/web-development/">Web Development</a></li></ol></li></ol></nav>

  <a href="#" class="back-to-top">&#11014; トップに戻る</a>
</aside>


      <article class="chapter">
        <h1>
          モデルの関連付け
          <a href="https://github.com/emberjs/guides/edit/master/source/models/relationships.md"
             target="_blank" class="edit-page icon-pencil">編集</a>
        </h1>
        <hr>

        <!--
Ember Data includes several built-in relationship types to help you
define how your models relate to each other.
-->

<p>Ember Dataは、モデルの相互関係の定義を支援するために、組み込みの関連付け(リレーションシップ)タイプをいくつか用意しています。</p>

<!--
### One-to-One
-->
<h3 id="toc_1対1" class="anchorable-toc">1対1</h3>
<!--
To declare a one-to-one relationship between two models, use
`DS.belongsTo`:
-->

<p>2つのモデル間に1対1の関係を宣言するには、<code>DS.belongsTo</code>を使用します。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/user.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">profile</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">profile</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/profile.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">user</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">user</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div></div>
<!--
### One-to-Many
-->
<h3 id="toc_1対多" class="anchorable-toc">1対多</h3>
<!--
To declare a one-to-many relationship between two models, use
`DS.belongsTo` in combination with `DS.hasMany`, like this:
-->

<p>2つのモデルの間に1対多の関係を宣言するには、<code>DS.hasMany</code>と組み合わせて<code>DS.belongsTo</code>を使用します。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/blog-post.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">comments</span>: DS.hasMany(<span class="string"><span class="delimiter">'</span><span class="content">comment</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/comment.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">blogPost</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div></div>
<!--
### Many-to-Many
-->
<h3 id="toc_多対多" class="anchorable-toc">多対多</h3>
<!--
To declare a many-to-many relationship between two models, use
`DS.hasMany`:
-->

<p>2つのモデルの間に多対多の関係を宣言するには、<code>DS.hasMany</code>を使用します。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/blog-post.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">tags</span>: DS.hasMany(<span class="string"><span class="delimiter">'</span><span class="content">tag</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/tag.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">blogPosts</span>: DS.hasMany(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div></div>
<!--
### Explicit Inverses
-->
<h3 id="toc_逆関係の明示" class="anchorable-toc">逆関係の明示</h3>
<!--
Ember Data will do its best to discover which relationships map to one
another. In the one-to-many code above, for example, Ember Data can figure out that
changing the `comments` relationship should update the `blogPost`
relationship on the inverse because `blogPost` is the only relationship to
that model.
-->

<p>Ember Dataは、どの関係が互いにマップされているかを突き止めるために最善を尽くします。
例えば、上の1対多のコードでは、<code>blogPost</code>がそのモデルとの唯一の関係であるため、<code>comments</code>関係を変更すると、逆の<code>blogPost</code>関係も更新する必要があることを、Ember Dataは知ることができます。</p>

<!--
However, sometimes you may have multiple `belongsTo`/`hasMany`s for
the same type. You can specify which property on the related model is
the inverse using `DS.belongsTo` or `DS.hasMany`'s `inverse`
option. Relationships without an inverse can be indicated as such by
including `{ inverse: null }`.
-->

<p>しかし、同じタイプの複数の<code>belongsTo</code>/<code>hasManys</code>を持つことが時々あります。
その場合、<code>DS.belongsTo</code>や<code>DS.hasMany</code>の<code>inverse</code>オプションを使用して、関連モデルのどのプロパティを逆にするかを指定できます。
逆のない関係は、<code>{inverse：null}</code>を含めることでそのように示すことができます。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/comment.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">onePost</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>, { <span class="key">inverse</span>: <span class="predefined-constant">null</span> }),
  <span class="key">twoPost</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>),
  <span class="key">redPost</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>),
  <span class="key">bluePost</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/blog-post.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">comments</span>: DS.hasMany(<span class="string"><span class="delimiter">'</span><span class="content">comment</span><span class="delimiter">'</span></span>, {
    <span class="key">inverse</span>: <span class="string"><span class="delimiter">'</span><span class="content">redPost</span><span class="delimiter">'</span></span>
  })
});
</pre></td>
</tr></table>
</div></div>
<!--
### Reflexive Relations
-->
<h3 id="toc_反射関係(再帰)" class="anchorable-toc">反射関係(再帰)</h3>
<!--
When you want to define a reflexive relation (a model that has a relationship to
itself), you must explicitly define the inverse relationship. If there
is no inverse relationship then you can set the inverse to `null`.
-->

<p>反射的関係(自身との関係を持つモデル)を定義する場合は、逆関係を明示的に定義する必要があります。
逆関係がない場合は、inverseを<code>null</code>に設定できます。</p>

<!--
Here's an example of a one-to-many reflexive relationship:
-->

<p>以下は、1対多の反射的関係の例です。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/folder.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">children</span>: DS.hasMany(<span class="string"><span class="delimiter">'</span><span class="content">folder</span><span class="delimiter">'</span></span>, { <span class="key">inverse</span>: <span class="string"><span class="delimiter">'</span><span class="content">parent</span><span class="delimiter">'</span></span> }),
  <span class="key">parent</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">folder</span><span class="delimiter">'</span></span>, { <span class="key">inverse</span>: <span class="string"><span class="delimiter">'</span><span class="content">children</span><span class="delimiter">'</span></span> })
});
</pre></td>
</tr></table>
</div></div>
<!--
Here's an example of a one-to-one reflexive relationship:
-->

<p>以下は、1対1の反射的関係の例です。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/user.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">name</span>: DS.attr(<span class="string"><span class="delimiter">'</span><span class="content">string</span><span class="delimiter">'</span></span>),
  <span class="key">bestFriend</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">user</span><span class="delimiter">'</span></span>, { <span class="key">inverse</span>: <span class="string"><span class="delimiter">'</span><span class="content">bestFriend</span><span class="delimiter">'</span></span> }),
});
</pre></td>
</tr></table>
</div></div>
<!--
You can also define a reflexive relationship that doesn't have an inverse:
-->

<p>逆の関係がない反射関係を定義することもできます。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/folder.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">parent</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">folder</span><span class="delimiter">'</span></span>, { <span class="key">inverse</span>: <span class="predefined-constant">null</span> })
});
</pre></td>
</tr></table>
</div></div>
<!--
### Polymorphism
-->
<h3 id="toc_ポリモーフィズム" class="anchorable-toc">ポリモーフィズム</h3>
<!--
Polymorphism is a powerful concept which allows a developer
to abstract common functionality into a base class. Consider the
following example: a user with multiple payment methods. They
could have a linked PayPal account, and a couple credit cards on
file.
-->

<p>ポリモーフィズム(多態性)は、開発者が共通の機能を基本クラスに抽象化することを可能にする強力な概念です。
複数の支払い方法を持つユーザーを例に考えてみましょう。
ユーザーはPayPalアカウントとクレジットカードをいくつか持てるとします。</p>

<!--
Note that, for polymorphism to work, Ember Data expects a
"type" declaration polymorphic type via the reserved `type`
property on the model. Confused? See the API response below.
-->

<p>ポリモーフィズムを機能させるために、Ember Dataでは、モデルの予約語プロパティの<code>type</code>でポリモーフィック関連を示します。
混乱してますか？
下記のAPIのレスポンスを見てください。</p>

<!--
First, let's look at the model definitions:
-->

<p>まず、モデル定義を見てみましょう。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/user.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">paymentMethods</span>: DS.hasMany(<span class="string"><span class="delimiter">'</span><span class="content">payment-method</span><span class="delimiter">'</span></span>, { <span class="key">polymorphic</span>: <span class="predefined-constant">true</span> })
});
</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/payment-method.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">user</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">user</span><span class="delimiter">'</span></span>, { <span class="key">inverse</span>: <span class="string"><span class="delimiter">'</span><span class="content">paymentMethods</span><span class="delimiter">'</span></span> }),
});
</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/payment-method-cc.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> { computed } from <span class="string"><span class="delimiter">'</span><span class="content">@ember/object</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> PaymentMethod from <span class="string"><span class="delimiter">'</span><span class="content">./payment-method</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> PaymentMethod.extend({
  <span class="key">last4</span>: DS.attr(),

  <span class="key">obfuscatedIdentifier</span>: computed(<span class="string"><span class="delimiter">'</span><span class="content">last4</span><span class="delimiter">'</span></span>, <span class="keyword">function</span> () {
    <span class="keyword">return</span> <span class="error">`</span>**** **** **** <span class="predefined">$</span>{<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">last4</span><span class="delimiter">'</span></span>)}<span class="error">`</span>;
  })
});
</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/payment-method-paypal.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> { computed } from <span class="string"><span class="delimiter">'</span><span class="content">@ember/object</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> PaymentMethod from <span class="string"><span class="delimiter">'</span><span class="content">./payment-method</span><span class="delimiter">'</span></span>

<span class="reserved">export</span> <span class="keyword">default</span> PaymentMethod.extend({
  <span class="key">linkedEmail</span>: DS.attr(),

  <span class="key">obfuscatedIdentifier</span>: computed(<span class="string"><span class="delimiter">'</span><span class="content">linkedEmail</span><span class="delimiter">'</span></span>, <span class="keyword">function</span> () {
    let last5 = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">linkedEmail</span><span class="delimiter">'</span></span>).split(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>).reverse().slice(<span class="integer">0</span>, <span class="integer">5</span>).reverse().join(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>);

    <span class="keyword">return</span> <span class="error">`</span><span class="error">•</span><span class="error">•</span><span class="error">•</span><span class="error">•</span><span class="predefined">$</span>{last5}<span class="error">`</span>;
  })
});
</pre></td>
</tr></table>
</div></div>
<!--
And our API might setup these relationships like so:
-->

<p>APIではこういった関係を以下のように表します。</p>
<div class="highlight json "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
</pre></td>
  <td class="code"><pre>{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">data</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">8675309</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">attributes</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Anfanie Farmeo</span><span class="delimiter">&quot;</span></span>
        },
        <span class="key"><span class="delimiter">&quot;</span><span class="content">relationships</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">payment-methods</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">data</span><span class="delimiter">&quot;</span></span>: [{
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>,
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">payment-method-paypal</span><span class="delimiter">&quot;</span></span>
                }, {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span>,
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">payment-method-cc</span><span class="delimiter">&quot;</span></span>
                }, {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span>,
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">payment-method-apple-pay</span><span class="delimiter">&quot;</span></span>
                }]
            }
        }
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">included</span><span class="delimiter">&quot;</span></span>: [{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">payment-method-paypal</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">attributes</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">linked-email</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ryan@gosling.io</span><span class="delimiter">&quot;</span></span>
        }
    }, {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">payment-method-cc</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">attributes</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">last4</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1335</span><span class="delimiter">&quot;</span></span>
        }
    }, {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">payment-method-apple-pay</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">attributes</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">last4</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">5513</span><span class="delimiter">&quot;</span></span>
        }
    }]
}
</pre></td>
</tr></table>
</div></div>
<!--
### Readonly Nested Data
-->
<h3 id="toc_読み取り専用のネストしたデータ" class="anchorable-toc">読み取り専用のネストしたデータ</h3>
<!--
Some models may have properties that are deeply nested objects of
readonly data. The naïve solution would be to define models for each
nested object and use `hasMany` and `belongsTo` to recreate the nested
relationship. However, since readonly data will never need to be
updated and saved this often results in the creation of a great deal
of code for very little benefit. An alternate approach is to define
these relationships using an attribute with no transform
(`DS.attr()`). This makes it easy to access readonly values in
computed properties and templates without the overhead of defining
extraneous models.
-->

<p>一部のモデルでは、プロパティに深くネストした読み取り専用のデータオブジェクトを持つ場合があります。
単純な解決策は、各ネストされたオブジェクトのモデルを定義し、<code>hasMany</code>と<code>belongsTo</code>を使用してネストした関係を再定義することです。
しかし、読み込み専用のデータは更新して保存する必要がないため、ほとんどの場合、大量のコードを書く割に得られるメリットが少ないという結果になります。
他の解決策は、これらの関係を変換のないアトリビュートとして(<code>DS.attr()</code>)定義することです。
これにより、余分なモデルの定義にコストをかけずに、算出プロパティとテンプレートで読み取り専用のデータにに簡単にアクセスできるようになります。</p>

<!--
### Creating Records
-->
<h3 id="toc_レコードの作成" class="anchorable-toc">レコードの作成</h3>
<!--
Let's assume that we have a `blog-post` and a `comment` model, which are related to each other as follows:
-->

<p><code>blog-post</code>と<code>comment</code>モデルがあり、次のように相互に関連しているとしましょう。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/blog-post.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">comments</span>: DS.hasMany(<span class="string"><span class="delimiter">'</span><span class="content">comment</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/models/comment.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> DS from <span class="string"><span class="delimiter">'</span><span class="content">ember-data</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> DS.Model.extend({
  <span class="key">blogPost</span>: DS.belongsTo(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>)
});
</pre></td>
</tr></table>
</div></div>
<!--
When a user comments on a blogPost, we need to create a relationship between the two records. We can simply set the `belongsTo` relationship in our new comment:
-->

<p>ユーザーがblogPostにコメントする時は、2つのレコードを関連付ける必要があります。
新しいコメントの<code>belongsTo</code>関係を設定するだけでできます。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>let blogPost = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);
let comment = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).createRecord(<span class="string"><span class="delimiter">'</span><span class="content">comment</span><span class="delimiter">'</span></span>, {
  <span class="key">blogPost</span>: blogPost
});
comment.save();
</pre></td>
</tr></table>
</div></div>
<!--
This will create a new `comment` record and save it to the server. Ember Data will also update the blogPost to include our newly created comment in its `comments` relationship.
-->

<p>これにより、<code>comment</code>レコードが作成され、サーバーに保存されます。
Ember Dataは、新たに作成されたコメントを<code>comments</code>関係に含めるためにblogPostも更新します。</p>

<!--
We could have also linked the two records together by updating the blogPost's `hasMany` relationship:
-->

<p>blogPostの<code>hasMany</code>関係を更新することで、2つのレコードをリンクすることもできます。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre>let blogPost = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);
let comment = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).createRecord(<span class="string"><span class="delimiter">'</span><span class="content">comment</span><span class="delimiter">'</span></span>, {
});
blogPost.get(<span class="string"><span class="delimiter">'</span><span class="content">comments</span><span class="delimiter">'</span></span>).pushObject(comment);
comment.save().then(<span class="keyword">function</span> () {
  blogPost.save();
});
</pre></td>
</tr></table>
</div></div>
<!--
In this case the new comment's `belongsTo` relationship will be set to the parent blogPost.
-->

<p>この場合、新しいコメントの<code>belongsTo</code>関係は親のblogPostに設定されます。</p>

<!--
Although `createRecord` is fairly straightforward, the only thing to watch out for
is that you cannot assign a promise as a relationship, currently.
-->

<p><code>createRecord</code>を使うのは簡単ですが、Promiseを設定できないことに気をつけてください。</p>

<!--
For example, if you want to set the `author` property of a blogPost, this would **not** work
if the `user` with id isn't already loaded into the store:
-->

<p>例えば、blogPostの<code>author</code>プロパティを設定する時に、指定したidを持つ<code>user</code>がまだストアに読み込まれていない場合、以下のやり方では動きません。</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).createRecord(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>, {
  <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rails is Omakase</span><span class="delimiter">'</span></span>,
  <span class="key">body</span>: <span class="string"><span class="delimiter">'</span><span class="content">Lorem ipsum</span><span class="delimiter">'</span></span>,
  <span class="key">author</span>: <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).findRecord(<span class="string"><span class="delimiter">'</span><span class="content">user</span><span class="delimiter">'</span></span>, <span class="integer">1</span>)
});
</pre></td>
</tr></table>
</div></div>
<!--
However, you can easily set the relationship after the promise has fulfilled:
-->

<p>ですが、Promiseが解決された後なら簡単に関係を設定することができます。</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre>let blogPost = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).createRecord(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>, {
  <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Rails is Omakase</span><span class="delimiter">'</span></span>,
  <span class="key">body</span>: <span class="string"><span class="delimiter">'</span><span class="content">Lorem ipsum</span><span class="delimiter">'</span></span>
});

<span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).findRecord(<span class="string"><span class="delimiter">'</span><span class="content">user</span><span class="delimiter">'</span></span>, <span class="integer">1</span>).then(<span class="keyword">function</span>(user) {
  blogPost.set(<span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>, user);
});
</pre></td>
</tr></table>
</div></div>
<!--
### Retrieving Related Records
-->
<h3 id="toc_関連データの取得" class="anchorable-toc">関連データの取得</h3>
<!--
When you request data from the server for a model that has relationships with one or more others,
you may want to retrieve records corresponding to those related models at the same time.
For example, when retrieving a blog post, you may need to access the comments associated
with the post as well.
The [JSON API specification allows](http://jsonapi.org/format/#fetching-includes)
servers to accept a query parameter with the key `include` as a request to
include those related records in the response returned to the client.
The value of the parameter should be a comma-separated list of names of the
relationships required.
-->

<p>他のモデルと関係を持つモデルのデータをサーバーに要求する時、関連するモデルのデータも同時に取得したいことがあります。
例えば、ブログ記事を取得時に、記事に関連付けられたコメントも必要な場合、
<a href="http://jsonapi.org/format/#fetching-includes">JSON API仕様</a>では、サーバに関連したデータをクライアントに返すレスポンスに含めるように要求するために、クエリパラメーターで<code>include</code>キーを使います。
パラメーターの値は、必要な関係モデルの名前をコンマ区切って指定します。</p>

<!--
If you are using an adapter that supports JSON API, such as Ember's default [`JSONAPIAdapter`](https://www.emberjs.com/api/ember-data/release/classes/DS.JSONAPIAdapter),
you can easily add the `include` parameter to the server requests created by
the `findRecord()`, `findAll()`,
`query()` and `queryRecord()` methods.
-->

<p>Emberのデフォルト<a href="https://www.emberjs.com/api/ember-data/release/classes/DS.JSONAPIAdapter"><code>JSONAPIAdapter</code></a>などのJSON APIをサポートするアダプターを使用している場合は、<code>findRecord()</code>、<code>findAll()</code>、<code>query()</code>および<code>queryRecord()</code>メソッドで<code>include</code>パラメーターを簡単に追加できます。</p>

<!--
`findRecord()` and `findAll()` each take an `options` argument in which you can
specify the `include` parameter.
For example, given a `post` model that has a `hasMany` relationship with a `comment` model,
when retrieving a specific post we can have the server also return that post's comments
as follows:
-->

<p><code>findRecord()</code>と<code>findAll()</code>では<code>options</code>引数で<code>include</code>パラメータを指定できます。
例えば、<code>comment</code>モデルとの<code>hasMany</code>関係を持つ<code>post</code>モデルがある場合、ある記事を取得する際に、サーバーにその記事のコメントも含めて返すように伝えるには、以下のようにします。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/post.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
  model(params) {
   <span class="keyword">return</span> <span class="local-variable">this</span>.store.findRecord(<span class="string"><span class="delimiter">'</span><span class="content">post</span><span class="delimiter">'</span></span>, params.post_id, {<span class="key">include</span>: <span class="string"><span class="delimiter">'</span><span class="content">comments</span><span class="delimiter">'</span></span>});
  }
});
</pre></td>
</tr></table>
</div></div>
<!--
The post's comments would then be available in your template as `model.comments`.
-->

<p>コメントはテンプレート内で<code>model.comments</code>として利用できるようになります。</p>

<!--
Nested relationships can be specified in the `include` parameter as a dot-separated sequence of relationship names.
So to request both the post's comments and the authors of those comments the request
would look like this:
-->

<p>ネストした関係は、<code>include</code>パラメーターに関連付けの名前をドット区切りで指定します。
記事のコメントとコメントの投稿者の両方を取得するには、以下のように書きます。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/post.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
  model(params) {
   <span class="keyword">return</span> <span class="local-variable">this</span>.store.findRecord(<span class="string"><span class="delimiter">'</span><span class="content">post</span><span class="delimiter">'</span></span>, params.post_id, {<span class="key">include</span>: <span class="string"><span class="delimiter">'</span><span class="content">comments,comments.author</span><span class="delimiter">'</span></span>});
  }
});
</pre></td>
</tr></table>
</div></div>
<!--
The `query()` and `queryRecord()` methods each take a `query` argument that is
serialized directly into the URL query string and the `include` parameter may
form part of that argument.
For example:
-->

<p><code>query()</code>と<code>queryRecord()</code>メソッドは、URLのクエリーに直接シリアライズされる<code>query</code>引数を取ります。
<code>include</code>パラメーターはその引数内で指定します。例:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/adele.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
  model() {
    <span class="comment">// GET to /artists?filter[name]=Adele&amp;include=albums</span>
    <span class="local-variable">this</span>.store.query(<span class="string"><span class="delimiter">'</span><span class="content">artist</span><span class="delimiter">'</span></span>, {
      <span class="key">filter</span>: {<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Adele</span><span class="delimiter">'</span></span>},
      <span class="key">include</span>: <span class="string"><span class="delimiter">'</span><span class="content">albums</span><span class="delimiter">'</span></span>
    }).then(<span class="keyword">function</span>(artists) {
      <span class="keyword">return</span> artists.get(<span class="string"><span class="delimiter">'</span><span class="content">firstObject</span><span class="delimiter">'</span></span>);
    });
  }
});
</pre></td>
</tr></table>
</div></div>
<!--
### Updating Existing Records
-->
<h3 id="toc_レコードの更新" class="anchorable-toc">レコードの更新</h3>
<!--
Sometimes we want to set relationships on already existing records. We can simply set a `belongsTo` relationship:
-->

<p>既存のレコードの関連付けをしたい場合は、単に<code>belongsTo</code>関係を設定するだけです。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>let blogPost = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);
let comment = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">comment</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);
comment.set(<span class="string"><span class="delimiter">'</span><span class="content">blogPost</span><span class="delimiter">'</span></span>, blogPost);
comment.save();
</pre></td>
</tr></table>
</div></div>
<!--
Alternatively, we could update the `hasMany` relationship by pushing a record into the relationship:
-->

<p>あるいは、関係をレコードにプッシュすることによって<code>hasMany</code>関係を更新することができます。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>let blogPost = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);
let comment = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">comment</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);
blogPost.get(<span class="string"><span class="delimiter">'</span><span class="content">comments</span><span class="delimiter">'</span></span>).pushObject(comment);
blogPost.save();
</pre></td>
</tr></table>
</div></div>
<!--
### Removing Relationships
-->
<h3 id="toc_関連の解消" class="anchorable-toc">関連の解消</h3>
<!--
To remove a `belongsTo` relationship, we can set it to `null`, which will also remove it from the `hasMany` side:
-->

<p><code>belongsTo</code>関係を削除するには、<code>null</code>に設定を設定します。
これにより、<code>hasMany</code>側との関係も無くなります。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>let comment = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">comment</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);
comment.set(<span class="string"><span class="delimiter">'</span><span class="content">blogPost</span><span class="delimiter">'</span></span>, <span class="predefined-constant">null</span>);
comment.save();
</pre></td>
</tr></table>
</div></div>
<!--
It is also possible to remove a record from a `hasMany` relationship:
-->

<p><code>hasMany</code>関係からレコードを削除することもできます。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>let blogPost = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);
let comment = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">comment</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);
blogPost.get(<span class="string"><span class="delimiter">'</span><span class="content">comments</span><span class="delimiter">'</span></span>).removeObject(comment);
blogPost.save();
</pre></td>
</tr></table>
</div></div>
<!--
As in the earlier examples, the comment's `belongsTo` relationship will also be cleared by Ember Data.
-->

<p>前の例と同様に、コメントの<code>belongsTo</code>関係もEmber Dataによってクリアされます。</p>

<!--
### Relationships as Promises
-->
<h3 id="toc_関連付けとPromise" class="anchorable-toc">関連付けとPromise</h3>
<!--
While working with relationships it is important to remember that they return promises.
-->

<p>関連付けられたモデルを扱う時は、Promiseが返されるということを覚えておくことが重要です。</p>

<!--
For example, if we were to work on a blogPost's asynchronous comments, we would have to wait until the promise has fulfilled:
-->

<p>例えば、blogPostのコメントが非同期の場合、Promiseが解決されるまで待つ必要があります。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>let blogPost = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">blog-post</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);

blogPost.get(<span class="string"><span class="delimiter">'</span><span class="content">comments</span><span class="delimiter">'</span></span>).then((comments) =&gt; {
  <span class="comment">// now we can work with the comments</span>
});
</pre></td>
</tr></table>
</div></div>
<!--
The same applies to `belongsTo` relationships:
-->

<p><code>belongsTo</code>関係にも同じことが言えます。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>let comment = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).peekRecord(<span class="string"><span class="delimiter">'</span><span class="content">comment</span><span class="delimiter">'</span></span>, <span class="integer">1</span>);

comment.get(<span class="string"><span class="delimiter">'</span><span class="content">blogPost</span><span class="delimiter">'</span></span>).then((blogPost) =&gt; {
  <span class="comment">// the blogPost is available here</span>
});
</pre></td>
</tr></table>
</div></div>
<!--
Handlebars templates will automatically be updated to reflect a resolved promise. We can display a list of comments in a blogPost like so:
-->

<p>ハンドルバーテンプレートはPromiseの解決を自動的に反映します。
そのため以下のように書くだけで、blogPostにコメントの一覧を表示することができます。</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="tag">&lt;ul&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">blogPost.comments</span> <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">comment</span><span class="error">|</span><span class="inline-delimiter">}}</span></span>
    <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">comment.id</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/li&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/ul&gt;</span>
</pre></td>
</tr></table>
</div></div>
<!--
Ember Data will query the server for the appropriate records and re-render the template once the data is received.
-->

<p>Ember Dataはサーバーに適切なレコードを要求し、データを取得するとテンプレートを再描画します。</p>



        
      <footer>
        <a href="../creating-updating-and-deleting-records/" class="previous-guide">作成、更新、削除</a> <a href="../pushing-records-into-the-store/" class="next-guide">レコードをストアにプッシュする</a>
      </footer>
      
      </article>
    </main>

    <div class="footer">
  <div class="container">
    <div class="footer-info">
      Copyright 2018
      <a href="http://tilde.io">Tilde Inc.</a>
      <br>
      <a href="http://emberjs.com/team">コアチーム</a> |
      <a href="http://emberjs.com/sponsors">スポンサー</a>
      <br>
      <a href="http://emberjs.com/security">セキュリティ</a> |
      <a href="http://emberjs.com/legal">法関連</a> |
      <a href="http://emberjs.com/logos">ロゴ</a>
      <br>
      <a href="http://emberjs.com/guidelines">コミュニティガイドライン</a>
    </div>

    <div class="footer-statement">
      Ember.js is free, open source and always will be.
    </div>

    <div class="footer-social">
      <a href="http://twitter.com/emberjs"
        title="Twitter">
        <i class="icon-twitter"></i>
      </a>
      <a href="https://github.com/emberjs/ember.js"
        title="GitHub">
        <i class="icon-github"></i>
      </a>
      <a href="https://plus.google.com/communities/106387049790387471205"
        title="Google+">
        <i class="icon-gplus"></i>
      </a>
    </div>
  </div>
</div>


    

    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
