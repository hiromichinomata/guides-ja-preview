<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#e46652">

    <title>Ember.js - ルーティング: ルートのモデルを指定する</title>
    <meta property="st:title" content="ルーティング: ルートのモデルを指定する" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../../images/favicon.png" rel="icon" type="image/png" />
    <!--[if lte IE 7 ]><link href="../../stylesheets/fonts/fontello-ie7.css" rel="stylesheet" /><![endif]-->
    <link href="../../stylesheets/application.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <!-- This TypeKit account is managed by @wifelette. Contact her with any issues. -->
    <script src="https://use.typekit.net/stz3kpn.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

    <link href="/blog/feed.xml" rel="alternate" type="application/atom+xml" title="Ember.js - ブログ" />
    
  </head>

  <body class="guides routing routing_specifying-a-routes-model routing_specifying-a-routes-model_index">

    <!--[if lt IE 9]>
      <script src="../../javascripts/common-old-ie.js"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
      <script src="../../javascripts/common-modern.js"></script>
    <!--<![endif]-->

    <header>
<nav class="navbar navbar-inverse">
 <div class="container">
  <div class="navbar-header">
   <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
        <span class="sr-only">切替</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
   <a class="navbar-brand" href="http://emberjs.com"><img src="https://glimmer-styleguide.global.ssl.fastly.net/glimmer-styleguide/master/images/ember-logo.svg" alt="home" /></a>
  </div>
  <div class="collapse navbar-collapse" id="navbar-collapse">
   <ul class="nav navbar-nav">
    <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">ドキュメント <span class="caret"></span></a>
     <ul class="dropdown-menu">
      <li><a href="http://emberjs.com/guides">ガイド</a></li>
      <li><a href="http://emberjs.com/api">APIリファレンス</a></li>
      <li role="separator" class="divider"></li>
      <li><a href="http://emberjs.com/learn">学ぶ</a></li>
     </ul>
    </li>
    <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">リリース <span class="caret"></span></a>
     <ul class="dropdown-menu">
      <li><a href="http://emberjs.com/builds">チャネル</a></li>
      <li><a href="http://emberjs.com/builds/release">-- ステーブル</a></li>
      <li><a href="http://emberjs.com/builds/beta">-- ベータ</a></li>
      <li><a href="http://emberjs.com/builds/canary">-- カナリア</a></li>
      <li role="separator" class="divider"></li>
      <li><a href="http://emberjs.com/deprecations">廃止予定</a></li>
      <li><a href="http://emberjs.com/statusboard">ステータスボード</a></li>
     </ul>
    </li>
    <li><a href="http://emberjs.com/blog">ブログ</a></li>
    <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">コミュニティ <span class="caret"></span></a>
     <ul class="dropdown-menu">
      <li><a href="http://emberjs.com/community">Emberコミュニティ</a></li>
       <li><a href="http://emberjs.com/guidelines">ガイドライン</a></li>
       <li><a href="http://github.com/emberjs/">貢献(Github)</a></li>
       <li role="separator" class="divider"></li>
       <li><a href="http://emberjs.com/community/meetups">イベント</a></li>
       <li><a href="http://jobs.emberjs.com/">採用情報</a></li>
       <li role="separator" class="divider"></li>
       <li><a href="http://emberconf.com/">Ember Conf</a></li>
     </ul>
     </li>
     <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About<span class="caret"></span></a>
      <ul class="dropdown-menu">
       <li><a href="http://emberjs.com/team">チーム</a></li>
       <li role="separator" class="divider"></li>
       <li><a href="http://emberjs.com/logos">ロゴ</a></li>
       <li><a href="http://emberjs.com/mascots">マスコット</a></li>
       <li role="separator" class="divider"></li>
       <li><a href="http://emberjs.com/ember-users">Ember採用企業</a></li>
       <li><a href="http://emberjs.com/sponsors">スポンサー</a></li>
       <li role="separator" class="divider"></li>
       <li><a href="http://emberjs.com/legal">法関連</a></li>
       <li><a href="http://emberjs.com/security">セキュリティ</a></li>
      </ul>
     </li>
   </ul>
   <form class="navbar-form navbar-right searchbox">
    <div class="input-group">
      <label for="search-input" class="control-label sr-only">検索</label>
        <input type="text"
        class="form-control search input ds-input"
        placeholder="検索..."
        id="search-input"
        role="combobox"
        aria-expanded="false"
        aria-owns="algolia-autocomplete-listbox-0"
        autocorrect="off"
        autocapitalize="none"
        spellcheck="false"
        />
        <span></span>
    </div>
   </form>
  </div>
  <!-- /.navbar-collapse -->
 </div>
 <!-- /.container-fluid -->
</nav>
</header>


    

    <main class="container">

      <aside class="sidebar">
  <input id="toc-toggle" class="toc-toggle visually-hidden" type="checkbox" />
  <label for="toc-toggle">目次 <span class="visually-hidden">切替</span></label>

  <nav class='toc-container' aria-label='table of contents'><ol class='toc-level-0 selected'><li class='toc-level-0 '><a href="#">はじめに</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../getting-started/quick-start/">クイックスタート</a></li><li class='toc-level-1 '><a href="../../getting-started/">Emberのインストール</a></li><li class='toc-level-1 '><a href="../../getting-started/core-concepts/">Emberのコアコンセプト</a></li><li class='toc-level-1 '><a href="../../getting-started/js-primer/">JavaScript手引き</a></li></ol></li><li class='toc-level-0 '><a href="#">チュートリアル</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../tutorial/ember-cli/">アプリの作成</a></li><li class='toc-level-1 '><a href="../../tutorial/acceptance-test/">プランニング</a></li><li class='toc-level-1 '><a href="../../tutorial/routes-and-templates/">ルートとテンプレート</a></li><li class='toc-level-1 '><a href="../../tutorial/model-hook/">モデルフック</a></li><li class='toc-level-1 '><a href="../../tutorial/installing-addons/">アドオンのインストール</a></li><li class='toc-level-1 '><a href="../../tutorial/simple-component/">コンポーネントの作成</a></li><li class='toc-level-1 '><a href="../../tutorial/hbs-helper/">ヘルパーの作成</a></li><li class='toc-level-1 '><a href="../../tutorial/ember-data/">Ember Dataを使う</a></li><li class='toc-level-1 '><a href="../../tutorial/autocomplete-component/">複雑なコンポーネントの作成</a></li><li class='toc-level-1 '><a href="../../tutorial/service/">サービスとユーティリティ</a></li><li class='toc-level-1 '><a href="../../tutorial/subroutes/">ネストしたルートの作成</a></li><li class='toc-level-1 '><a href="../../tutorial/deploying/">デプロイ</a></li></ol></li><li class='toc-level-0 '><a href="#">オブジェクトモデル</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../object-model/">Emberのオブジェクト</a></li><li class='toc-level-1 '><a href="../../object-model/classes-and-instances/">クラスとインスタンス</a></li><li class='toc-level-1 '><a href="../../object-model/reopening-classes-and-instances/">クラスとインスタンスの再オープン</a></li><li class='toc-level-1 '><a href="../../object-model/computed-properties/">算出プロパティ</a></li><li class='toc-level-1 '><a href="../../object-model/computed-properties-and-aggregate-data/">算出プロパティとデータ集計</a></li><li class='toc-level-1 '><a href="../../object-model/observers/">オブザーバー</a></li><li class='toc-level-1 '><a href="../../object-model/bindings/">バインディング</a></li><li class='toc-level-1 '><a href="../../object-model/enumerables/">列挙型</a></li></ol></li><li class='toc-level-0 selected'><a href="#">ルーティング</a><ol class='toc-level-1 selected'><li class='toc-level-1 '><a href="../">はじめに</a></li><li class='toc-level-1 '><a href="../defining-your-routes/">ルートの定義</a></li><li class='toc-level-1 selected'><a href="./">ルートのモデルを指定する</a></li><li class='toc-level-1 '><a href="../rendering-a-template/">テンプレートの描画</a></li><li class='toc-level-1 '><a href="../redirection/">リダイレクション</a></li><li class='toc-level-1 '><a href="../preventing-and-retrying-transitions/">トランジションの中止と再開</a></li><li class='toc-level-1 '><a href="../loading-and-error-substates/">ロード中とエラーの表示</a></li><li class='toc-level-1 '><a href="../query-params/">クエリーパラメーター</a></li><li class='toc-level-1 '><a href="../asynchronous-routing/">非同期ルーティング</a></li></ol></li><li class='toc-level-0 '><a href="#">テンプレート</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../templates/handlebars-basics/">Handlebarsの基礎</a></li><li class='toc-level-1 '><a href="../../templates/built-in-helpers/">ビルトインヘルパー</a></li><li class='toc-level-1 '><a href="../../templates/conditionals/">条件分岐</a></li><li class='toc-level-1 '><a href="../../templates/displaying-a-list-of-items/">リストの表示</a></li><li class='toc-level-1 '><a href="../../templates/displaying-the-keys-in-an-object/">オブジェクトのキーの表示</a></li><li class='toc-level-1 '><a href="../../templates/binding-element-attributes/">要素の属性のバインディング</a></li><li class='toc-level-1 '><a href="../../templates/links/">リンク</a></li><li class='toc-level-1 '><a href="../../templates/actions/">アクション</a></li><li class='toc-level-1 '><a href="../../templates/input-helpers/">inputヘルパー</a></li><li class='toc-level-1 '><a href="../../templates/development-helpers/">開発用ヘルパー</a></li><li class='toc-level-1 '><a href="../../templates/writing-helpers/">ヘルパーの作成</a></li></ol></li><li class='toc-level-0 '><a href="#">コンポーネント</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../components/defining-a-component/">コンポーネントの定義</a></li><li class='toc-level-1 '><a href="../../components/the-component-lifecycle/">コンポーネントのライフサイクル</a></li><li class='toc-level-1 '><a href="../../components/passing-properties-to-a-component/">コンポーネントへのプロパティの受け渡し</a></li><li class='toc-level-1 '><a href="../../components/wrapping-content-in-a-component/">コンポーネント内のコンテンツをラップする</a></li><li class='toc-level-1 '><a href="../../components/customizing-a-components-element/">コンポーネントの要素のカスタマイズ</a></li><li class='toc-level-1 '><a href="../../components/block-params/">ブロック引数を使う</a></li><li class='toc-level-1 '><a href="../../components/handling-events/">イベント処理</a></li><li class='toc-level-1 '><a href="../../components/triggering-changes-with-actions/">アクションによる変更のトリガー</a></li></ol></li><li class='toc-level-0 '><a href="#">コントローラー</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../controllers/">はじめに</a></li></ol></li><li class='toc-level-0 '><a href="#">モデル</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../models/">はじめに</a></li><li class='toc-level-1 '><a href="../../models/defining-models/">モデルの定義</a></li><li class='toc-level-1 '><a href="../../models/finding-records/">レコード検索</a></li><li class='toc-level-1 '><a href="../../models/creating-updating-and-deleting-records/">作成、更新、削除</a></li><li class='toc-level-1 '><a href="../../models/relationships/">モデルの関連付け</a></li><li class='toc-level-1 '><a href="../../models/pushing-records-into-the-store/">レコードをストアにプッシュする</a></li><li class='toc-level-1 '><a href="../../models/handling-metadata/">Handling Metadata</a></li><li class='toc-level-1 '><a href="../../models/customizing-adapters/">Customizing Adapters</a></li><li class='toc-level-1 '><a href="../../models/customizing-serializers/">Customizing Serializers</a></li></ol></li><li class='toc-level-0 '><a href="#">Application Concerns</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../applications/applications-and-instances/">Applications and Instances</a></li><li class='toc-level-1 '><a href="../../applications/dependency-injection/">Dependency Injection</a></li><li class='toc-level-1 '><a href="../../applications/initializers/">Initializers</a></li><li class='toc-level-1 '><a href="../../applications/services/">Services</a></li><li class='toc-level-1 '><a href="../../applications/run-loop/">The Run Loop</a></li></ol></li><li class='toc-level-0 '><a href="#">Testing</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../testing/">Introduction</a></li><li class='toc-level-1 '><a href="../../testing/acceptance/">Application Tests</a></li><li class='toc-level-1 '><a href="../../testing/unit-testing-basics/">Testing Basics</a></li><li class='toc-level-1 '><a href="../../testing/testing-components/">Testing Components</a></li><li class='toc-level-1 '><a href="../../testing/testing-helpers/">Testing Helpers</a></li><li class='toc-level-1 '><a href="../../testing/testing-controllers/">Testing Controllers</a></li><li class='toc-level-1 '><a href="../../testing/testing-routes/">Testing Routes</a></li><li class='toc-level-1 '><a href="../../testing/testing-models/">Testing Models</a></li></ol></li><li class='toc-level-0 '><a href="#">Ember Inspector</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../ember-inspector/">Introduction</a></li><li class='toc-level-1 '><a href="../../ember-inspector/installation/">Installing the Inspector</a></li><li class='toc-level-1 '><a href="../../ember-inspector/object-inspector/">Object Inspector</a></li><li class='toc-level-1 '><a href="../../ember-inspector/view-tree/">The View Tree</a></li><li class='toc-level-1 '><a href="../../ember-inspector/routes/">Inspecting Routes</a></li><li class='toc-level-1 '><a href="../../ember-inspector/data/">Data Tab</a></li><li class='toc-level-1 '><a href="../../ember-inspector/deprecations/">Tackling Deprecations</a></li><li class='toc-level-1 '><a href="../../ember-inspector/info/">Library Info</a></li><li class='toc-level-1 '><a href="../../ember-inspector/promises/">Debugging Promises</a></li><li class='toc-level-1 '><a href="../../ember-inspector/container/">Inspecting Objects via the Container</a></li><li class='toc-level-1 '><a href="../../ember-inspector/render-performance/">Rendering Performance</a></li><li class='toc-level-1 '><a href="../../ember-inspector/troubleshooting/">Troubleshooting</a></li></ol></li><li class='toc-level-0 '><a href="#">Addons and Dependencies</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../addons-and-dependencies/managing-dependencies/">Managing Dependencies</a></li></ol></li><li class='toc-level-0 '><a href="#">Configuring Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../configuring-ember/configuring-your-app/">Configuring Your App</a></li><li class='toc-level-1 '><a href="../../configuring-ember/configuring-ember-cli/">Configuring Ember CLI</a></li><li class='toc-level-1 '><a href="../../configuring-ember/handling-deprecations/">Handling Deprecations</a></li><li class='toc-level-1 '><a href="../../configuring-ember/disabling-prototype-extensions/">Disabling Prototype Extensions</a></li><li class='toc-level-1 '><a href="../../configuring-ember/specifying-url-type/">Specifying the URL Type</a></li><li class='toc-level-1 '><a href="../../configuring-ember/embedding-applications/">Embedding Applications</a></li><li class='toc-level-1 '><a href="../../configuring-ember/feature-flags/">Feature Flags</a></li><li class='toc-level-1 '><a href="../../configuring-ember/build-targets/">Build targets</a></li><li class='toc-level-1 '><a href="../../configuring-ember/debugging/">Debugging</a></li></ol></li><li class='toc-level-0 '><a href="#">Contributing to Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../contributing/adding-new-features/">Adding New Features</a></li><li class='toc-level-1 '><a href="../../contributing/repositories/">Repositories</a></li></ol></li><li class='toc-level-0 '><a href="#">Glossary</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../glossary/web-development/">Web Development</a></li></ol></li></ol></nav>

  <a class="back-to-top" href="#">&#11014; トップに戻る</a>
</aside>


      <article class="chapter">
        <h1>
          ルートのモデルを指定する
          <a href="https://github.com/emberjs/guides/edit/master/source/routing/specifying-a-routes-model.md"
             target="_blank" class="edit-page icon-pencil">編集</a>
        </h1>
        <hr>

        <!--
Often, you'll want a template to display data from a model. Loading the
appropriate model is one job of a route.
-->

<p>テンプレートでモデルのデータを表示したいことが多々あります。
適切なモデルを読み込むことは、ルートの仕事の1つです。</p>

<p>例えば、次のルータを使用します。</p>

<!--
For example, take this router:
-->
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/router.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">favorite-posts</span><span class="delimiter">'</span></span>);
});
</pre></td>
</tr></table>
</div></div>
<!--
To load a model for the `favorite-posts` route, you would use the [`model()`](https://www.emberjs.com/api/ember/release/classes/Route/methods/model?anchor=model)
hook in the `favorite-posts` route handler:
-->

<p><code>favorite-posts</code>ルートのモデルを読み込むには、<code>favorite-posts</code>ルートハンドラで<a href="https://www.emberjs.com/api/ember/release/classes/Route/methods/model?anchor=model"><code>model()</code></a>フックを使います：</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/favorite-posts.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
  model() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).query(<span class="string"><span class="delimiter">'</span><span class="content">post</span><span class="delimiter">'</span></span>, { <span class="key">favorite</span>: <span class="predefined-constant">true</span> });
  }
});
</pre></td>
</tr></table>
</div></div>
<!--
Typically, the `model` hook should return an [Ember Data](../../models/) record,
but it can also return any [promise](https://www.promisejs.org/) object (Ember Data records are promises),
or a plain JavaScript object or array.
Ember will wait until the data finishes loading (until the promise is resolved) before rendering the template.
-->

<p>通常、<code>model</code>フックは<a href="../../models/">Ember Data</a>レコードを返すべきですが、<a href="https://www.promisejs.org/">Promise</a>オブジェクト(Ember DataレコードはPromiseです)、またはプレーンJavaScriptオブジェクトか配列を返すこともできます。
Emberは、テンプレートを描画する前にデータのロードの完了を(Promiseが解決されるのを)待ちます。</p>

<!--
The route will then set the return value from the `model` hook as the `model` property of the controller.
You will then be able to access the controller's `model` property in your template:
-->

<p>ルートは、<code>model</code>フックからの戻り値をコントローラの<code>model</code>プロパティとして設定します。
その後、テンプレートでコントローラの<code>model</code>プロパティにアクセスできるようになります。</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/templates/favorite-posts.hbs</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="tag">&lt;h1&gt;</span>Favorite Posts<span class="tag">&lt;/h1&gt;</span>
<span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">model</span> <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">post</span><span class="error">|</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;p&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">post.body</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/p&gt;</span>
<span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div>
<!--
## Dynamic Models
-->
<h2 id="toc_動的モデル" class="anchorable-toc">動的モデル</h2>
<!--
Some routes always display the same model. For example, the `/photos`
route will always display the same list of photos available in the
application. If your user leaves this route and comes back later, the
model does not change.
-->

<p>ルートによっては、常に同じモデルが表示されるものがあります。
例えば、<code>/photos</code>ルートにいつも同じ写真一覧を表示してる場合、
ユーザーがこのルートを離れて後で戻ってきても、モデルが変更されることはありません。</p>

<!--
However, you will often have a route whose model will change depending
on user interaction. For example, imagine a photo viewer app. The
`/photos` route will render the `photos` template with the list of
photos as the model, which never changes. But when the user clicks on a
particular photo, we want to display that model with the `photo`
template. If the user goes back and clicks on a different photo, we want
to display the `photo` template again, this time with a different model.
-->

<p>ですが、ユーザーの操作に応じてモデルが変更されるルートがあることがよくあります。
例えば、写真表示アプリを想像してみてください。
<code>/photos</code>ルートは<code>photos</code>テンプレートをモデルとして描画します。モデルは変更されません。
しかし、ユーザーが特定の写真をクリックすると、<code>photo</code>テンプレートを使用してそのモデルを表示したり、
ユーザーが別の写真に戻ってクリックすると、今度は別のモデルで写真テンプレートを再度表示したいことがあります。</p>

<!--
In cases like this, it's important that we include some information in
the URL about not only which template to display, but also which model.
-->

<p>その場合、表示するテンプレートだけでなく、モデルについての情報もURLに含めることが重要です。</p>

<!--
In Ember, this is accomplished by defining routes with [dynamic
segments](../defining-your-routes/#toc_dynamic-segments).
-->

<p>Emberでは、<a href="../defining-your-routes/#toc_dynamic-segments">動的セグメント</a>を使ったルートの定義で
実現できます。</p>

<!--
Once you have defined a route with a dynamic segment,
Ember will extract the value of the dynamic segment from the URL for
you and pass them as a hash to the `model` hook as the first argument:
-->

<p>動的セグメントを持つルートを定義すると、EmberはURLから動的セグメントの値を抽出し、ハッシュとして<code>model</code>フックに第1引数として渡します。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/router.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">photo</span><span class="delimiter">'</span></span>, { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">/photos/:photo_id</span><span class="delimiter">'</span></span> });
});
</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/photo.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
  model(params) {
    <span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).findRecord(<span class="string"><span class="delimiter">'</span><span class="content">photo</span><span class="delimiter">'</span></span>, params.photo_id);
  }
});
</pre></td>
</tr></table>
</div></div>
<!--
In the `model` hook for routes with dynamic segments, it's your job to
turn the ID (something like `47` or `post-slug`) into a model that can
be rendered by the route's template. In the above example, we use the
photo's ID (`params.photo_id`) as an argument to Ember Data's `findRecord`
method.
-->

<p>動的セグメントを持つルートの<code>model</code>フックでは、ID（<code>47</code>または<code>article-title</code>のようなもの)をルートテンプレートで使うモデルに変換するなどの実装が必要です。
上記の例では、Ember Dataの<code>findRecord</code>メソッドの引数として、写真のID(<code>params.photo_id</code>)を使用しています。</p>

<!--
Note: A route with a dynamic segment will always have its `model` hook called when it is entered via the URL.
If the route is entered through a transition (e.g. when using the [link-to](../../templates/links) Handlebars helper),
and a model context is provided (second argument to `link-to`), then the hook is not executed.
If an identifier (such as an id or slug) is provided instead then the model hook will be executed.
-->

<p>注意: 動的セグメントを持つルートは、URLを介して入ったときに呼び出される<code>model</code>フックを常に持ちます。 
例えば、(<a href="../../templates/links">link-to</a>ヘルパーを使用するときなど)ルートに遷移させる際、(<code>link-to</code>の第2引数に)モデルを渡すと、<code>model</code>フックは実行されません。
識別子(IDやスラッグなど)が渡されている場合は、 <code>model</code>フックは実行されます。</p>

<!--
For example, transitioning to the `photo` route this way won't cause the `model` hook to be executed (because `link-to`
was passed a model):
-->

<p>例えば、以下の方法で<code>photo</code>ルートに遷移すると<code>model</code>フックは実行されません。(<code>link-to</code>にモデルを渡しているため)</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/templates/photos.hbs</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="tag">&lt;h1&gt;</span>Photos<span class="tag">&lt;/h1&gt;</span>
<span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">model</span> <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">photo</span><span class="error">|</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;p&gt;</span>
    <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">link-to</span> <span class="error">&quot;</span><span class="attribute-name">photo</span><span class="error">&quot;</span> <span class="attribute-name">photo</span><span class="inline-delimiter">}}</span></span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span></span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">photo.thumbnailUrl</span><span class="inline-delimiter">}}</span></span><span class="string"><span class="delimiter">&quot;</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span></span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">photo.title</span><span class="inline-delimiter">}}</span></span><span class="string"><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">link-to</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;/p&gt;</span>
<span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div>
<!--
while transitioning this way will cause the `model` hook to be executed (because `link-to` was passed `photo.id`, an
identifier, instead):
-->

<p>以下ように遷移すると<code>model</code>フックが実行されます。(link-toには識別子である<code>photo.id</code>が渡されるため)</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/templates/photos.hbs</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="tag">&lt;h1&gt;</span>Photos<span class="tag">&lt;/h1&gt;</span>
<span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">model</span> <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">photo</span><span class="error">|</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;p&gt;</span>
    <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">link-to</span> <span class="error">&quot;</span><span class="attribute-name">photo</span><span class="error">&quot;</span> <span class="attribute-name">photo.id</span><span class="inline-delimiter">}}</span></span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span></span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">photo.thumbnailUrl</span><span class="inline-delimiter">}}</span></span><span class="string"><span class="delimiter">&quot;</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span></span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">photo.title</span><span class="inline-delimiter">}}</span></span><span class="string"><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">link-to</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;/p&gt;</span>
<span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div>
<!--
Routes without dynamic segments will always execute the model hook.
-->

<p>動的セグメントのないルートは常に<code>model</code>フックを実行します。</p>

<!--
## Multiple Models
-->
<h2 id="toc_複数のモデル" class="anchorable-toc">複数のモデル</h2>
<!--
Multiple models can be returned through an
[RSVP.hash](https://www.emberjs.com/api/ember/release/classes/rsvp/methods/hash?anchor=hash).
The `RSVP.hash` method takes an object with promises or values as properties as an argument, and returns a single promise.
When all of the promises in the object resolve, the returned promise will resolve with an object of all of the promise values. For example:
-->

<p>複数のモデルは、<a href="https://www.emberjs.com/api/ember/release/classes/rsvp/methods/hash?anchor=hash">RSVP.hash</a>を使って返すことができます。
<code>RSVP.hash</code>は、引数に<code>Promise</code>か値を持つオブジェクトをとり、<code>Promise</code>を返します。
返されたPromiseは、オブジェクト内の<code>Promise</code>が全て解決されると、promiseで解決された値を入れたオブジェクトで解決されます。
例:
```app/routes/songs.js
import Route from &#39;@ember/routing/route&#39;;
import RSVP from &#39;rsvp&#39;;</p>

<p>export default Route.extend({
  model() {
    return RSVP.hash({
      songs: this.get(&#39;store&#39;).findAll(&#39;song&#39;),
      albums: this.get(&#39;store&#39;).findAll(&#39;album&#39;)
    });
  }
});
```</p>

<!--
In the `songs` template, we can specify both models and use the `{{#each}}` helper to display
each record in the song model and album model:
-->

<p><code>songs</code>テンプレートでは、両方のモデルを指定し、<code>{{#each}}</code>ヘルパーを使用して、songモデルとalbumモデルの各レコードを表示できます。</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/templates/songs.hbs</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="tag">&lt;h1&gt;</span>Playlist<span class="tag">&lt;/h1&gt;</span>

<span class="tag">&lt;ul&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">model.songs</span> <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">song</span><span class="error">|</span><span class="inline-delimiter">}}</span></span>
    <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">song.name</span><span class="inline-delimiter">}}</span></span> by <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">song.artist</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/li&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/ul&gt;</span>

<span class="tag">&lt;h1&gt;</span>Albums<span class="tag">&lt;/h1&gt;</span>

<span class="tag">&lt;ul&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">model.albums</span> <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">album</span><span class="error">|</span><span class="inline-delimiter">}}</span></span>
    <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">album.title</span><span class="inline-delimiter">}}</span></span> by <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">album.artist</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/li&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/ul&gt;</span>
</pre></td>
</tr></table>
</div></div>
<!--
If you use [Ember Data](../../models/) and you are building an `RSVP.hash` with the model's relationship, consider instead properly setting up your [relationships](../../models/relationships) and letting Ember Data take care of loading them.
-->

<p><a href="../../models/">Ember Data</a>を使用していて、モデルの関係(relationships)で<code>RSVP.hash</code>を作成している場合は、<code>RSVP.hash</code>を使うのではなく、代わりに<a href="../../models/relationships">relationships</a>を適切に設定し、Ember Dataがそれらの読み込みを処理できるようにしてください。</p>

<!--
## Reusing Route Context
-->
<h2 id="toc_ルートコンテキストの再利用" class="anchorable-toc">ルートコンテキストの再利用</h2>
<!--
Sometimes you need to fetch a model, but your route doesn't have the parameters, because it's
a child route and the route directly above or a few levels above has the parameters that your route
needs.
-->

<p>モデルを取得する必要があっても、そのルートではパラメーターを取得できない場合あります。
子ルートではパラメーターにアクセスできず、親ルートでできることがあります。</p>

<!--
In this scenario, you can use the `paramsFor` method to get the parameters of a parent route.
-->

<p>その場合、<code>paramsFor</code>メソッドを使用して親ルートのパラメーターを取得できます。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/album/index.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
  model() {
    let { album_id } = <span class="local-variable">this</span>.paramsFor(<span class="string"><span class="delimiter">'</span><span class="content">album</span><span class="delimiter">'</span></span>);

    <span class="keyword">return</span> <span class="local-variable">this</span>.store.query(<span class="string"><span class="delimiter">'</span><span class="content">song</span><span class="delimiter">'</span></span>, { <span class="key">album</span>: album_id });
  }
});
</pre></td>
</tr></table>
</div></div>
<!--
This is guaranteed to work because the parent route is loaded. But if you tried to
do `paramsFor` on a sibling route, you wouldn't have the results you expected.
-->

<p>子ルートでは、親ルートはロードされているため、これは動作することが保証されています。
しかし、兄弟ルートで<code>paramsFor</code>をしようとすると、期待した結果が得られないでしょう。</p>

<!--
This is a great way to use the parent context to load something that you want.
Using `paramsFor` will also give you the query params defined on that route's controller.
This method could also be used to look up the current route's parameters from an action
or another method on the route, and in that case we have a shortcut: `this.paramsFor(this.routeName)`.
-->

<p><code>paramsFor</code>で親ルートから必要なものを読み込むのは最適なやり方です。
<code>paramsFor</code>は、そのルートのコントローラで定義されたクエリーパラメーターも得られます。
このメソッドは、ルート上のアクションか別のメソッドから現在のルートのパラメーターを取得するためにも使用できます
その場合は、<code>this.paramsFor(this.routeName)</code>というショートカットがあります。</p>

<!--
In our case, the parent route had already loaded its songs, so we would be writing unnecessary fetching logic.
Let's rewrite the same route, but use `modelFor`, which works the same way, but returns the model
from the parent route.
-->

<p>上記の例の場合、親ルートには既に曲がロードされていますが、子ルートに不要なデータ取得のコードを書くこともできます。
ルートを書き直してみましょう。
ですが今回は、<code>modelFor</code>を使い、親ルートからモデルを返して、同じように動作するようにします。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/album/index.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
  model() {
    let { songs } = <span class="local-variable">this</span>.modelFor(<span class="string"><span class="delimiter">'</span><span class="content">album</span><span class="delimiter">'</span></span>);

    <span class="keyword">return</span> songs;
  }
});
</pre></td>
</tr></table>
</div></div>
<!--
In the case above, the parent route looked something like this:
-->

<p>上記の場合、親ルートは次のようになります。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/album.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> RSVP from <span class="string"><span class="delimiter">'</span><span class="content">rsvp</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
  model({ album_id }) {
    <span class="keyword">return</span> RSVP.hash({
      <span class="key">album</span>: <span class="local-variable">this</span>.store.findRecord(<span class="string"><span class="delimiter">'</span><span class="content">album</span><span class="delimiter">'</span></span>, album_id),
      <span class="key">songs</span>: <span class="local-variable">this</span>.store.query(<span class="string"><span class="delimiter">'</span><span class="content">songs</span><span class="delimiter">'</span></span>, { <span class="key">album</span>: album_id })
    });
  }
});
</pre></td>
</tr></table>
</div></div>
<!--
And calling `modelFor` returned the result of the `model` hook.
-->

<p><code>modelFor</code>を呼び出すと、<code>model</code>フックの結果が返されます。</p>



        
      <footer>
        <a class="previous-guide" href="../defining-your-routes/">ルートの定義</a> <a class="next-guide" href="../rendering-a-template/">テンプレートの描画</a>
      </footer>
      
      </article>
    </main>

    <div class="footer">
  <div class="container">
    <div class="footer-info">
      Copyright 2018
      <a href="http://tilde.io">Tilde Inc.</a>
      <br>
      <a href="http://emberjs.com/team">コアチーム</a> |
      <a href="http://emberjs.com/sponsors">スポンサー</a>
      <br>
      <a href="http://emberjs.com/security">セキュリティ</a> |
      <a href="http://emberjs.com/legal">法関連</a> |
      <a href="http://emberjs.com/logos">ロゴ</a>
      <br>
      <a href="http://emberjs.com/guidelines">コミュニティガイドライン</a>
    </div>

    <div class="footer-statement">
      Ember.js is free, open source and always will be.
    </div>

    <div class="footer-social">
      <a href="http://twitter.com/emberjs"
        title="Twitter">
        <i class="icon-twitter"></i>
      </a>
      <a href="https://github.com/emberjs/ember.js"
        title="GitHub">
        <i class="icon-github"></i>
      </a>
      <a href="https://plus.google.com/communities/106387049790387471205"
        title="Google+">
        <i class="icon-gplus"></i>
      </a>
    </div>
  </div>
</div>


    

    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
