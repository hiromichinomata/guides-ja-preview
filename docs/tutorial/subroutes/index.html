<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#e46652">

    <title>Ember.js - チュートリアル: ネストしたルートの作成</title>
    <meta property="st:title" content="チュートリアル: ネストしたルートの作成" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../../images/favicon.png" rel="icon" type="image/png" />
    <!--[if lte IE 7 ]><link href="../../stylesheets/fonts/fontello-ie7.css" rel="stylesheet" /><![endif]-->
    <link href="../../stylesheets/application.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <!-- This TypeKit account is managed by @wifelette. Contact her with any issues. -->
    <script src="https://use.typekit.net/stz3kpn.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

    <link href="/blog/feed.xml" rel="alternate" type="application/atom+xml" title="Ember.js - ブログ" />
    
  </head>

  <body class="guides tutorial tutorial_subroutes tutorial_subroutes_index">

    <!--[if lt IE 9]>
      <script src="../../javascripts/common-old-ie.js"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
      <script src="../../javascripts/common-modern.js"></script>
    <!--<![endif]-->

    <header class="header">
  <nav role="navigation" aria-label="main">
    <ul class="header-nav container">
      <li class="header-logo">
        <a href="http://emberjs.com/"><span class="visually-hidden">Emberホームページ</span></a>
      </li>
      <li>
        <a href="http://emberjs.com/learn">参考</a>
      </li>
      <li class="active" aria-label="You are here">
        <a href="/">ガイド</a>
      </li>
      <li>
        <a href="http://emberjs.com/api">API</a>
      </li>
      <li>
        <a href="http://emberjs.com/community">コミュニティ</a>
      </li>
      <li>
        <a href="http://emberjs.com/blog">ブログ</a>
      </li>
      <li>
        <a href="http://emberjs.com/builds">リリース</a>
      </li>

      <li class="header-search">
        <form>
          <input type="text" id="search-input" class="search-input" placeholder="ガイド内検索"/>
        </form>
      </li>
    </ul>
  </nav>
</header>


    

    <main class="container">

      <aside class="sidebar">
  <input id="toc-toggle" class="toc-toggle visually-hidden" type="checkbox" />
  <label for="toc-toggle">目次 <span class="visually-hidden">切替</span></label>

  <nav class='toc-container' aria-label='table of contents'><ol class='toc-level-0 selected'><li class='toc-level-0 '><a href="#">はじめに</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../getting-started/quick-start/">クイックスタート</a></li><li class='toc-level-1 '><a href="../../getting-started/">Emberのインストール</a></li><li class='toc-level-1 '><a href="../../getting-started/core-concepts/">Emberのコアコンセプト</a></li><li class='toc-level-1 '><a href="../../getting-started/js-primer/">JavaScript手引き</a></li></ol></li><li class='toc-level-0 selected'><a href="#">チュートリアル</a><ol class='toc-level-1 selected'><li class='toc-level-1 '><a href="../ember-cli/">アプリの作成</a></li><li class='toc-level-1 '><a href="../acceptance-test/">プランニング</a></li><li class='toc-level-1 '><a href="../routes-and-templates/">ルートとテンプレート</a></li><li class='toc-level-1 '><a href="../model-hook/">モデルフック</a></li><li class='toc-level-1 '><a href="../installing-addons/">アドオンのインストール</a></li><li class='toc-level-1 '><a href="../simple-component/">コンポーネントの作成</a></li><li class='toc-level-1 '><a href="../hbs-helper/">ヘルパーの作成</a></li><li class='toc-level-1 '><a href="../ember-data/">Ember Dataを使う</a></li><li class='toc-level-1 '><a href="../autocomplete-component/">複雑なコンポーネントの作成</a></li><li class='toc-level-1 '><a href="../service/">サービスとユーティリティ</a></li><li class='toc-level-1 selected'><a href="./">ネストしたルートの作成</a></li><li class='toc-level-1 '><a href="../deploying/">デプロイ</a></li></ol></li><li class='toc-level-0 '><a href="#">オブジェクトモデル</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../object-model/">Emberのオブジェクト</a></li><li class='toc-level-1 '><a href="../../object-model/classes-and-instances/">クラスとインスタンス</a></li><li class='toc-level-1 '><a href="../../object-model/reopening-classes-and-instances/">クラスとインスタンスの再オープン</a></li><li class='toc-level-1 '><a href="../../object-model/computed-properties/">Computed Properties</a></li><li class='toc-level-1 '><a href="../../object-model/computed-properties-and-aggregate-data/">Computed Properties and Aggregate Data</a></li><li class='toc-level-1 '><a href="../../object-model/observers/">Observers</a></li><li class='toc-level-1 '><a href="../../object-model/bindings/">Bindings</a></li><li class='toc-level-1 '><a href="../../object-model/enumerables/">Enumerables</a></li></ol></li><li class='toc-level-0 '><a href="#">Routing</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../routing/">Introduction</a></li><li class='toc-level-1 '><a href="../../routing/defining-your-routes/">Defining Your Routes</a></li><li class='toc-level-1 '><a href="../../routing/specifying-a-routes-model/">Specifying a Route's Model</a></li><li class='toc-level-1 '><a href="../../routing/rendering-a-template/">Rendering a Template</a></li><li class='toc-level-1 '><a href="../../routing/redirection/">Redirecting</a></li><li class='toc-level-1 '><a href="../../routing/preventing-and-retrying-transitions/">Preventing and Retrying Transitions</a></li><li class='toc-level-1 '><a href="../../routing/loading-and-error-substates/">Loading / Error Substates</a></li><li class='toc-level-1 '><a href="../../routing/query-params/">Query Parameters</a></li><li class='toc-level-1 '><a href="../../routing/asynchronous-routing/">Asynchronous Routing</a></li></ol></li><li class='toc-level-0 '><a href="#">Templates</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../templates/handlebars-basics/">Handlebars Basics</a></li><li class='toc-level-1 '><a href="../../templates/built-in-helpers/">Built-in Helpers</a></li><li class='toc-level-1 '><a href="../../templates/conditionals/">Conditionals</a></li><li class='toc-level-1 '><a href="../../templates/displaying-a-list-of-items/">Displaying a List of Items</a></li><li class='toc-level-1 '><a href="../../templates/displaying-the-keys-in-an-object/">Displaying the Keys in an Object</a></li><li class='toc-level-1 '><a href="../../templates/binding-element-attributes/">Binding Element Attributes</a></li><li class='toc-level-1 '><a href="../../templates/links/">Links</a></li><li class='toc-level-1 '><a href="../../templates/actions/">Actions</a></li><li class='toc-level-1 '><a href="../../templates/input-helpers/">Input Helpers</a></li><li class='toc-level-1 '><a href="../../templates/development-helpers/">Development Helpers</a></li><li class='toc-level-1 '><a href="../../templates/writing-helpers/">Writing Helpers</a></li></ol></li><li class='toc-level-0 '><a href="#">Components</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../components/defining-a-component/">Defining a Component</a></li><li class='toc-level-1 '><a href="../../components/the-component-lifecycle/">The Component Lifecycle</a></li><li class='toc-level-1 '><a href="../../components/passing-properties-to-a-component/">Passing Properties to a Component</a></li><li class='toc-level-1 '><a href="../../components/wrapping-content-in-a-component/">Wrapping Content in a Component</a></li><li class='toc-level-1 '><a href="../../components/customizing-a-components-element/">Customizing a Component's Element</a></li><li class='toc-level-1 '><a href="../../components/block-params/">Using Block Params</a></li><li class='toc-level-1 '><a href="../../components/handling-events/">Handling Events</a></li><li class='toc-level-1 '><a href="../../components/triggering-changes-with-actions/">Triggering Changes with Actions</a></li></ol></li><li class='toc-level-0 '><a href="#">Controllers</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../controllers/">Introduction</a></li></ol></li><li class='toc-level-0 '><a href="#">Models</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../models/">Introduction</a></li><li class='toc-level-1 '><a href="../../models/defining-models/">Defining Models</a></li><li class='toc-level-1 '><a href="../../models/finding-records/">Finding Records</a></li><li class='toc-level-1 '><a href="../../models/creating-updating-and-deleting-records/">Creating, Updating and Deleting</a></li><li class='toc-level-1 '><a href="../../models/relationships/">Relationships</a></li><li class='toc-level-1 '><a href="../../models/pushing-records-into-the-store/">Pushing Records into the Store</a></li><li class='toc-level-1 '><a href="../../models/handling-metadata/">Handling Metadata</a></li><li class='toc-level-1 '><a href="../../models/customizing-adapters/">Customizing Adapters</a></li><li class='toc-level-1 '><a href="../../models/customizing-serializers/">Customizing Serializers</a></li></ol></li><li class='toc-level-0 '><a href="#">Application Concerns</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../applications/applications-and-instances/">Applications and Instances</a></li><li class='toc-level-1 '><a href="../../applications/dependency-injection/">Dependency Injection</a></li><li class='toc-level-1 '><a href="../../applications/initializers/">Initializers</a></li><li class='toc-level-1 '><a href="../../applications/services/">Services</a></li><li class='toc-level-1 '><a href="../../applications/run-loop/">The Run Loop</a></li></ol></li><li class='toc-level-0 '><a href="#">Testing</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../testing/">Introduction</a></li><li class='toc-level-1 '><a href="../../testing/acceptance/">Acceptance Tests</a></li><li class='toc-level-1 '><a href="../../testing/unit-testing-basics/">Unit Testing Basics</a></li><li class='toc-level-1 '><a href="../../testing/testing-components/">Testing Components</a></li><li class='toc-level-1 '><a href="../../testing/testing-helpers/">Testing Helpers</a></li><li class='toc-level-1 '><a href="../../testing/testing-controllers/">Testing Controllers</a></li><li class='toc-level-1 '><a href="../../testing/testing-routes/">Testing Routes</a></li><li class='toc-level-1 '><a href="../../testing/testing-models/">Testing Models</a></li></ol></li><li class='toc-level-0 '><a href="#">Ember Inspector</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../ember-inspector/">Introduction</a></li><li class='toc-level-1 '><a href="../../ember-inspector/installation/">Installing the Inspector</a></li><li class='toc-level-1 '><a href="../../ember-inspector/object-inspector/">Object Inspector</a></li><li class='toc-level-1 '><a href="../../ember-inspector/view-tree/">The View Tree</a></li><li class='toc-level-1 '><a href="../../ember-inspector/routes/">Inspecting Routes</a></li><li class='toc-level-1 '><a href="../../ember-inspector/data/">Data Tab</a></li><li class='toc-level-1 '><a href="../../ember-inspector/deprecations/">Tackling Deprecations</a></li><li class='toc-level-1 '><a href="../../ember-inspector/info/">Library Info</a></li><li class='toc-level-1 '><a href="../../ember-inspector/promises/">Debugging Promises</a></li><li class='toc-level-1 '><a href="../../ember-inspector/container/">Inspecting Objects via the Container</a></li><li class='toc-level-1 '><a href="../../ember-inspector/render-performance/">Rendering Performance</a></li><li class='toc-level-1 '><a href="../../ember-inspector/troubleshooting/">Troubleshooting</a></li></ol></li><li class='toc-level-0 '><a href="#">Addons and Dependencies</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../addons-and-dependencies/managing-dependencies/">Managing Dependencies</a></li></ol></li><li class='toc-level-0 '><a href="#">Configuring Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../configuring-ember/configuring-your-app/">Configuring Your App</a></li><li class='toc-level-1 '><a href="../../configuring-ember/configuring-ember-cli/">Configuring Ember CLI</a></li><li class='toc-level-1 '><a href="../../configuring-ember/handling-deprecations/">Handling Deprecations</a></li><li class='toc-level-1 '><a href="../../configuring-ember/disabling-prototype-extensions/">Disabling Prototype Extensions</a></li><li class='toc-level-1 '><a href="../../configuring-ember/specifying-url-type/">Specifying the URL Type</a></li><li class='toc-level-1 '><a href="../../configuring-ember/embedding-applications/">Embedding Applications</a></li><li class='toc-level-1 '><a href="../../configuring-ember/feature-flags/">Feature Flags</a></li><li class='toc-level-1 '><a href="../../configuring-ember/build-targets/">Build targets</a></li><li class='toc-level-1 '><a href="../../configuring-ember/debugging/">Debugging</a></li></ol></li><li class='toc-level-0 '><a href="#">Contributing to Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../contributing/adding-new-features/">Adding New Features</a></li><li class='toc-level-1 '><a href="../../contributing/repositories/">Repositories</a></li></ol></li><li class='toc-level-0 '><a href="#">Glossary</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../glossary/web-development/">Web Development</a></li></ol></li></ol></nav>

  <a class="back-to-top" href="#">&#11014; トップに戻る</a>
</aside>


      <article class="chapter">
        <h1>
          ネストしたルートの作成
          <a href="https://github.com/emberjs/guides/edit/master/source/tutorial/subroutes.md"
             target="_blank" class="edit-page icon-pencil">編集</a>
        </h1>
        <hr>

        <!--
Up to this point, we've generated four top level routes.
-->

<p>これまでに、4つのトップレベルルートを作成しました。</p>

<!--
* An `about` route, that gives information on our application.
* A `contact` route, with information on how to contact the company.
* A `rentals` route, where we will allow users to browse rental properties.
* The `index` route, which we've set up to redirect to the `rentals` route.
-->

<ul>
<li><code>about</code>ルート: アプリケーションについての情報</li>
<li><code>contact</code>ルート: お問い合わせ先に関する情報</li>
<li><code>rentals</code>ルート: 賃貸物件を閲覧するページ</li>
<li><code>index</code>ルート: <code>rentals</code>ルートにリダイレクト</li>
</ul>

<!--
Our `rentals` route is going to serve multiple functions.
From our [acceptance tests](../acceptance-test), we've shown that we want our users to be able to browse and search rentals, as well as see detailed information for individual rentals.
To satisfy that requirement, we are going to make use of Ember's [nested route capability](../../routing/defining-your-routes/#toc_nested-routes).
-->

<p><code>rentals</code>ルートにさらに機能を追加します。
<a href="../acceptance-test">受け入れテスト</a>から、ユーザーが物件を閲覧したり、検索したり、個々の物件の詳細情報を参照できることを定義しました。
この要件を満たすために、Emberの<a href="../../routing/defining-your-routes/#toc_nested-routes">ルートのネスト(入れ子)機能</a>を利用します。</p>

<!--
By the end of this section we want to have created the following new routes:
-->

<p>このセクションの最後には、以下の新しいルートの作成が完了しているでしょう。</p>

<!--
* A `rentals/index` route that displays the rental page's general information, and also lists available rentals.
The index nested route is shown by default when the user visits the `rentals` URL.
* A `rentals/show` route that still displays the rental page's general information, while also showing detailed information about a selected rental.
The `show` route will get substituted with the id of the rental being shown (for example `rentals/grand-old-mansion`).
-->

<ul>
<li><code>rentals/index</code>ルート: 物件ページの一般情報を表示し、利用可能な物件を一覧表示する。
ユーザーが <code>rentals</code> URLにアクセスすると、ネストしたインデックスルートがデフォルトで表示されます。</li>
<li><code>rentals/show</code>ルート: 物件ページの一般情報も表示しつつ、選択した物件に関する詳細情報を表示する。
<code>show</code>ルートは、表示されている物件ID（例えば、<code>rentals/grand-old-mansion</code>(壮大な邸宅))に置き換えられます。</li>
</ul>

<!--
## The Parent Route
-->
<h2 id="toc_親ルート" class="anchorable-toc">親ルート</h2>
<!--
Previously, in the [Routes and Templates tutorial](../routes-and-templates), we set up a `rentals` route.
-->

<p>以前に、<a href="../routes-and-templates">ルートとテンプレート</a>チュートリアルで<code>rentals</code>ルートを設定していました。</p>

<!--
Opening the template for this route reveals an outlet underneath the route's general page information.
At the bottom of the template, you'll notice an `{{outlet}}` helper.
This is where the active nested route will be rendered.
-->

<p>このルートのテンプレートを開くと、一番下に<code>{{outlet}}</code>ヘルパーがあります。
outletはネストしたアクティブなルートが描画される場所です。</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/templates/rentals.hbs</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
</pre></td>
  <td class="code"><pre><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jumbo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">right tomster</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;h2&gt;</span>Welcome!<span class="tag">&lt;/h2&gt;</span>
  <span class="tag">&lt;p&gt;</span>We hope you find exactly what you're looking for in a place to stay.<span class="tag">&lt;/p&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">link-to</span> <span class="error">'</span><span class="attribute-name">about</span><span class="error">'</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">button</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span>
    About Us
  <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">link-to</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/div&gt;</span>
<span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">list-filter</span>
   <span class="attribute-name">filter</span>=<span class="error">(</span><span class="attribute-value">action</span> <span class="error">'</span><span class="attribute-name">filterByCity</span><span class="error">'</span><span class="error">)</span>
   <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">rentals</span><span class="error">|</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;ul</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">results</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">rentals</span> <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">rentalUnit</span><span class="error">|</span><span class="inline-delimiter">}}</span></span>
      <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental-listing</span> <span class="attribute-name">rental</span>=<span class="attribute-value">rentalUnit</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/li&gt;</span>
    <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;/ul&gt;</span>
<span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">list-filter</span><span class="inline-delimiter">}}</span></span>
<span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div>
<!--
Having a parent route means that any content on our parent route template will be present as we browse down through our child routes, allowing us to add things like common instructions, navigation, footers or sidebars.
-->

<p>親ルートを持っているということは、親ルートのテンプレートのコンテンツは、子ルートを閲覧する際に存在することを意味し、ナビゲーション、フッターまたはサイドバーの共通のものを追加することができます。</p>

<!--
## Generating a Nested Index Route
-->
<h2 id="toc_ネストしたインデックスルートの作成" class="anchorable-toc">ネストしたインデックスルートの作成</h2>
<!--
The first nested route to generate will be the index route.
An index nested route works similarly to the base index route.
It is the default route that renders when no route is provided.
Therefore in our case, when we navigate to `/rentals`, Ember will attempt to load the rentals index route as a nested route.
-->

<p>最初に作成するネストしたルートはインデックスルートです。
ネストしたインデックスルートは、ベースインデックスルートと同様に機能します。
これは、ルートが提供されていないときに描画されるデフォルトのルートです。
したがって、<code>/rentals</code>にナビゲートすると、Emberは<code>rentals/index</code>ルートをネストしたルートとしてロードしようとします。</p>

<!--
To create an index nested route, run the following command:
-->

<p>ネストしたインデックスルートを作成するには、次のコマンドを実行します。</p>
<div class="highlight shell "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>ember g route rentals/index
</pre></td>
</tr></table>
</div></div>
<!--
If you open up your Router (`app/router.js`) you may notice that the rentals line has changed.
This extra `function() {}` is required because it needs a child route, the `this.route('index', { path: '/'});` is implied.
-->

<p>ルーター(<code>app/router.js</code>)を開くと、rentalsの行が変更されていることが気がつくでしょう。この特別な<code>function() {}</code> は、子ルートが必要なので必須です。これは<code>this.route(&#39;index&#39;, { path: &#39;/&#39;});</code> 暗黙的に表しています。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/router.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">about</span><span class="delimiter">'</span></span>);
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">contact</span><span class="delimiter">'</span></span>);
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">rentals</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {});
});
</pre></td>
</tr></table>
</div></div>
<!--
Much like how our application's `index` route doesn't appear in our Router, `index` routes on sub-routes won't explicitly appear in the Router either.
Ember knows that the default action is to take the user to the `index` route.
However, you can add the `index` route if you want to customize it.
For example, you can modify the `index` route's path by specifying `this.route('index', { path: '/custom-path'})`.
-->

<p>アプリケーションの<code>index</code>ルートがルーターに書かれていないのと同じで、子ルートの<code>index</code>ルートもルーターに明示的に書くことはしません。
Emberはデフォルトのアクションがユーザーを<code>index</code>ルートに連れて行くことを知っています。
ただし、カスタマイズする場合は、<code>index</code>ルートを書きます。
たとえば、<code>this.route(&#39;index&#39;, { path: &#39;/custom-path&#39;})</code>と指定することで、インデックスルートのパスを変更できます。</p>

<!--
In the section on [using Ember Data](../ember-data#toc_updating-the-model-hook), we added a call to fetch all rentals.
Let's implement our newly generated `rentals/index` route by moving this `findAll` call from the parent `rentals` route to our new sub-route.
-->

<p><code>rentals/index</code>ルートを実装していきましょう。
<a href="../ember-data#toc_%E3%83%A2%E3%83%87%E3%83%AB%E3%83%95%E3%83%83%E3%82%AF%E3%81%AE%E5%A4%89%E6%9B%B4">Ember Dataを使う</a>のセクションでは、すべての物件を取得するよう実装しました。
その<code>findAll</code>を呼び出している部分を親ルート(rentals)から子ルート(<code>rentals/index</code>)に移します。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/rentals.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
<span class="highlight-line removed">4</span>
<span class="highlight-line removed">5</span>
<span class="highlight-line removed">6</span>
7</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
<span class="highlight-line removed">  model() {</span>
<span class="highlight-line removed">    <span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).findAll(<span class="string"><span class="delimiter">'</span><span class="content">rental</span><span class="delimiter">'</span></span>);</span>
<span class="highlight-line removed">  }</span>
});</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/rentals/index.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
<span class="highlight-line added">4</span>
<span class="highlight-line added">5</span>
<span class="highlight-line added">6</span>
7</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
<span class="highlight-line added">  model() {</span>
<span class="highlight-line added">    <span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).findAll(<span class="string"><span class="delimiter">'</span><span class="content">rental</span><span class="delimiter">'</span></span>);</span>
<span class="highlight-line added">  }</span>
});</pre></td>
</tr></table>
</div></div>
<!--
Now that we are returning all of our rentals to the nested route's model, we will also move the rental list markup from our main route template to our nested route index template.
-->

<p>すべての物件をネストしたルートのモデルに戻したので、物件一覧のマークアップもメインルートのテンプレートからネストしたインデックスルートのテンプレートに移します。</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/templates/rentals.hbs</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
<span class="highlight-line removed">9</span>
<span class="highlight-line removed"><strong>10</strong></span>
<span class="highlight-line removed">11</span>
<span class="highlight-line removed">12</span>
<span class="highlight-line removed">13</span>
<span class="highlight-line removed">14</span>
<span class="highlight-line removed">15</span>
<span class="highlight-line removed">16</span>
<span class="highlight-line removed">17</span>
18</pre></td>
  <td class="code"><pre><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">jumbo</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right tomster</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;h2&gt;</span>Welcome!<span class="tag">&lt;/h2&gt;</span>
  <span class="tag">&lt;p&gt;</span>We hope you find exactly what you're looking for in a place to stay.<span class="tag">&lt;/p&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">link-to</span> <span class="error">'</span><span class="attribute-name">about</span><span class="error">'</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">button</span><span class="delimiter">"</span></span><span class="inline-delimiter">}}</span></span>
    About Us
  <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">link-to</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/div&gt;</span>
<span class="highlight-line removed"><span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">list-filter</span></span>
<span class="highlight-line removed">   <span class="attribute-name">filter</span>=<span class="error">(</span><span class="attribute-value">action</span> <span class="error">'</span><span class="attribute-name">filterByCity</span><span class="error">'</span><span class="error">)</span></span>
<span class="highlight-line removed">   <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">rentals</span><span class="error">|</span><span class="inline-delimiter">}}</span></span></span>
<span class="highlight-line removed">  <span class="tag">&lt;ul</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">results</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></span>
<span class="highlight-line removed">    <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">rentals</span> <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">rentalUnit</span><span class="error">|</span><span class="inline-delimiter">}}</span></span></span>
<span class="highlight-line removed">      <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental-listing</span> <span class="attribute-name">rental</span>=<span class="attribute-value">rentalUnit</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/li&gt;</span></span>
<span class="highlight-line removed">    <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span></span>
<span class="highlight-line removed">  <span class="tag">&lt;/ul&gt;</span></span>
<span class="highlight-line removed"><span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">list-filter</span><span class="inline-delimiter">}}</span></span></span>
<span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span><span class="inline-delimiter">}}</span></span></pre></td>
</tr></table>
</div></div><div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/templates/rentals/index.hbs</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre><span class="highlight-line added">1</span>
<span class="highlight-line added">2</span>
<span class="highlight-line added">3</span>
<span class="highlight-line added">4</span>
<span class="highlight-line added">5</span>
<span class="highlight-line added">6</span>
<span class="highlight-line added">7</span>
<span class="highlight-line added">8</span>
<span class="highlight-line added">9</span>
<strong>10</strong></pre></td>
  <td class="code"><pre><span class="highlight-line added"><span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">list-filter</span></span>
<span class="highlight-line added">   <span class="attribute-name">filter</span>=<span class="error">(</span><span class="attribute-value">action</span> <span class="error">'</span><span class="attribute-name">filterByCity</span><span class="error">'</span><span class="error">)</span></span>
<span class="highlight-line added">   <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">rentals</span><span class="error">|</span><span class="inline-delimiter">}}</span></span></span>
<span class="highlight-line added">  <span class="tag">&lt;ul</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">results</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></span>
<span class="highlight-line added">    <span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">each</span> <span class="attribute-name">rentals</span> <span class="attribute-name">as</span> <span class="error">|</span><span class="attribute-name">rentalUnit</span><span class="error">|</span><span class="inline-delimiter">}}</span></span></span>
<span class="highlight-line added">      <span class="tag">&lt;li&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental-listing</span> <span class="attribute-name">rental</span>=<span class="attribute-value">rentalUnit</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/li&gt;</span></span>
<span class="highlight-line added">    <span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">each</span><span class="inline-delimiter">}}</span></span></span>
<span class="highlight-line added">  <span class="tag">&lt;/ul&gt;</span></span>
<span class="highlight-line added"><span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">list-filter</span><span class="inline-delimiter">}}</span></span></span>
<span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span><span class="inline-delimiter">}}</span></span></pre></td>
</tr></table>
</div></div>
<!--
Finally, we need to make our controller that has our filter action available to the new nested index route.
-->

<p>最後に、ネストしたインデックスルートで検索機能を使えるよう、コントローラを作成する必要があります。</p>

<!--
Start by running the following command to create an index controller for our nested route: 
-->

<p>次のコマンドを実行して、ネストしたインデックスルートのコントローラを作成します。</p>
<div class="highlight shell "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>ember g controller rentals/index
</pre></td>
</tr></table>
</div></div>
<!--
Instead of copying the whole controller file over to `app/controllers/rentals/index.js` from `app/controllers/rentals.js`, we'll just take advantage of JavaScript's import/export feature to re-export the rentals controller as the rentals/index controller:
-->

<p>単に<code>app/controllers/rentals.js</code>から<code>app/controllers/rentals/index.js</code>にファイル全体をコピーするのではなく、JavaScriptのインポート/エクスポート機能を利用して、rentalsコントローラを再エクスポートし、rentals/indexコントローラで使うやり方でやってみましょう:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/controllers/rentals/index.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre><span class="highlight-line removed">1</span>
<span class="highlight-line added">2</span>
3
<span class="highlight-line removed">4</span>
<span class="highlight-line removed">5</span>
<span class="highlight-line added">6</span></pre></td>
  <td class="code"><pre><span class="highlight-line removed"><span class="reserved">import</span> Controller from <span class="string"><span class="delimiter">'</span><span class="content">@ember/controller</span><span class="delimiter">'</span></span>;</span>
<span class="highlight-line added"><span class="reserved">import</span> RentalsController from <span class="string"><span class="delimiter">'</span><span class="content">../rentals</span><span class="delimiter">'</span></span>;</span>

<span class="highlight-line removed"><span class="reserved">export</span> <span class="keyword">default</span> Controller.extend({</span>
<span class="highlight-line removed">});</span>
<span class="highlight-line added"><span class="reserved">export</span> <span class="keyword">default</span> RentalsController;</span></pre></td>
</tr></table>
</div></div>
<!--
## Setting up Data for the Nested Detail Route
-->
<h2 id="toc_ネストしたshowルートの設定" class="anchorable-toc">ネストしたshowルートの設定</h2>
<!--
Next, we will want to create a sub-route that will list information for a specific rental.
To do this, we will need to update a couple of files.
To find a specific rental, we will want to use Ember Data's `findRecord` function [(see "Finding Records" for more details)](../../models/finding-records/).
The `findRecord` function requires that we search by a unique key. -->

<p>次に、特定の物件の詳細情報を表示する子ルートを作成します。
そのためには、いくつかのファイルの変更が必要です。
特定の物件の情報を取得するには、Ember Dataの<code>findRecord</code>関数を使用します。<a href="../../models/finding-records/">(詳しくは、「レコードの検索」を参照)</a>
<code>findRecord</code>関数は、ユニークなキーで検索する必要があります。</p>

<!--
While on the `show` route, we will also want to show additional information about our specific rental.
-->

<p><code>show</code>ルートでは、物件の追加情報を表示するようにします。</p>

<!--
In order to do this, we will need to modify the Mirage `config.js` file that we added
back in the [Installing Addons section](../installing-addons). We will add a new route
handler to return a specific rental:
-->

<p>これを行うには、<a href="../installing-addons">アドオンのインストール</a>のセクションで追加したMirageの<code>config.js</code>ファイルを変更する必要があります。
特定の物件を返すための新しいルートハンドラを追加します:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">mirage/config.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
<span class="highlight-line added">57</span>
<span class="highlight-line added">58</span>
<span class="highlight-line added">59</span>
<span class="highlight-line added"><strong>60</strong></span>
61
62</pre></td>
  <td class="code"><pre><span class="reserved">export</span> <span class="keyword">default</span> <span class="keyword">function</span>() {
  <span class="local-variable">this</span>.namespace = <span class="string"><span class="delimiter">'</span><span class="content">/api</span><span class="delimiter">'</span></span>;

  let rentals = [
    {
      <span class="key">type</span>: <span class="string"><span class="delimiter">'</span><span class="content">rentals</span><span class="delimiter">'</span></span>,
      <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">grand-old-mansion</span><span class="delimiter">'</span></span>,
      <span class="key">attributes</span>: {
        <span class="key">title</span>: <span class="string"><span class="delimiter">"</span><span class="content">Grand Old Mansion</span><span class="delimiter">"</span></span>,
        <span class="key">owner</span>: <span class="string"><span class="delimiter">"</span><span class="content">Veruca Salt</span><span class="delimiter">"</span></span>,
        <span class="key">city</span>: <span class="string"><span class="delimiter">"</span><span class="content">San Francisco</span><span class="delimiter">"</span></span>,
        <span class="key"><span class="delimiter">"</span><span class="content">property-type</span><span class="delimiter">"</span></span>: <span class="string"><span class="delimiter">"</span><span class="content">Estate</span><span class="delimiter">"</span></span>,
        <span class="key">bedrooms</span>: <span class="integer">15</span>,
        <span class="key">image</span>: <span class="string"><span class="delimiter">"</span><span class="content">https://upload.wikimedia.org/wikipedia/commons/c/cb/Crane_estate_(5).jpg</span><span class="delimiter">"</span></span>,
        <span class="key">description</span>: <span class="string"><span class="delimiter">"</span><span class="content">This grand old mansion sits on over 100 acres of rolling hills and dense redwood forests.</span><span class="delimiter">"</span></span>
      }
    },
    {
      <span class="key">type</span>: <span class="string"><span class="delimiter">'</span><span class="content">rentals</span><span class="delimiter">'</span></span>,
      <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">urban-living</span><span class="delimiter">'</span></span>,
      <span class="key">attributes</span>: {
        <span class="key">title</span>: <span class="string"><span class="delimiter">"</span><span class="content">Urban Living</span><span class="delimiter">"</span></span>,
        <span class="key">owner</span>: <span class="string"><span class="delimiter">"</span><span class="content">Mike Teavee</span><span class="delimiter">"</span></span>,
        <span class="key">city</span>: <span class="string"><span class="delimiter">"</span><span class="content">Seattle</span><span class="delimiter">"</span></span>,
        <span class="key"><span class="delimiter">"</span><span class="content">property-type</span><span class="delimiter">"</span></span>: <span class="string"><span class="delimiter">"</span><span class="content">Condo</span><span class="delimiter">"</span></span>,
        <span class="key">bedrooms</span>: <span class="integer">1</span>,
        <span class="key">image</span>: <span class="string"><span class="delimiter">"</span><span class="content">https://upload.wikimedia.org/wikipedia/commons/0/0e/Alfonso_13_Highrise_Tegucigalpa.jpg</span><span class="delimiter">"</span></span>,
        <span class="key">description</span>: <span class="string"><span class="delimiter">"</span><span class="content">A commuters dream. This rental is within walking distance of 2 bus stops and the Metro.</span><span class="delimiter">"</span></span>
      }
    },
    {
      <span class="key">type</span>: <span class="string"><span class="delimiter">'</span><span class="content">rentals</span><span class="delimiter">'</span></span>,
      <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">downtown-charm</span><span class="delimiter">'</span></span>,
      <span class="key">attributes</span>: {
        <span class="key">title</span>: <span class="string"><span class="delimiter">"</span><span class="content">Downtown Charm</span><span class="delimiter">"</span></span>,
        <span class="key">owner</span>: <span class="string"><span class="delimiter">"</span><span class="content">Violet Beauregarde</span><span class="delimiter">"</span></span>,
        <span class="key">city</span>: <span class="string"><span class="delimiter">"</span><span class="content">Portland</span><span class="delimiter">"</span></span>,
        <span class="key"><span class="delimiter">"</span><span class="content">property-type</span><span class="delimiter">"</span></span>: <span class="string"><span class="delimiter">"</span><span class="content">Apartment</span><span class="delimiter">"</span></span>,
        <span class="key">bedrooms</span>: <span class="integer">3</span>,
        <span class="key">image</span>: <span class="string"><span class="delimiter">"</span><span class="content">https://upload.wikimedia.org/wikipedia/commons/f/f7/Wheeldon_Apartment_Building_-_Portland_Oregon.jpg</span><span class="delimiter">"</span></span>,
        <span class="key">description</span>: <span class="string"><span class="delimiter">"</span><span class="content">Convenience is at your doorstep with this charming downtown rental. Great restaurants and active night life are within a few feet.</span><span class="delimiter">"</span></span>
      }
    }
  ];

  <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">/rentals</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(db, request) {
    <span class="keyword">if</span> (request.queryParams.city !== <span class="predefined-constant">undefined</span>) {
      let filteredRentals = rentals.filter(<span class="keyword">function</span> (i) {
        <span class="keyword">return</span> i.attributes.city.toLowerCase().indexOf(request.queryParams.city.toLowerCase()) !== -<span class="integer">1</span>;
      });
      <span class="keyword">return</span> { <span class="key">data</span>: filteredRentals };
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> { <span class="key">data</span>: rentals };
    }
  });

<span class="highlight-line added">  <span class="comment">// Find and return the provided rental from our rental list above</span></span>
<span class="highlight-line added">  <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">/rentals/:id</span><span class="delimiter">'</span></span>, <span class="keyword">function</span> (db, request) {</span>
<span class="highlight-line added">    <span class="keyword">return</span> { <span class="key">data</span>: rentals.find((rental) =&gt; request.params.id === rental.id) };</span>
<span class="highlight-line added">  });</span>

}</pre></td>
</tr></table>
</div></div>
<!--
## Generating a Nested Detail Route
-->
<h2 id="toc_ネストしたshowルートの作成" class="anchorable-toc">ネストしたshowルートの作成</h2>
<!--
Now that our API is ready to return individual rentals, we can generate our `show` sub-route.
Much like generating our `rentals` route, we will use `ember g` to create a nested route.
-->

<p>APIが個々の物件を返す準備ができたので、子ルートの<code>show</code>ルートを作成しましょう。
<code>rentals</code>ルートの時と同じように、<code>ember g</code>を使ってネストしたルートを作成します。</p>
<div class="highlight shell "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>ember g route rentals/show
</pre></td>
</tr></table>
</div></div>
<!--
You will see output like this:
-->

<p>次のような出力が表示されます。</p>
<div class="highlight shell "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre>installing route
  create app/routes/rentals/show.js
  create app/templates/rentals/show.hbs
updating router
  add route rentals/show
installing route-test
  create tests/unit/routes/rentals/show-test.js
</pre></td>
</tr></table>
</div></div>
<!--
Let's start by looking at the changes to our Router (`app/router.js`).
-->

<p>まず、ルータ(<code>app/router.js</code>)への変更を見てみましょう。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/router.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
<span class="highlight-line added">5</span>
6
7</pre></td>
  <td class="code"><pre>Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">about</span><span class="delimiter">'</span></span>);
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">contact</span><span class="delimiter">'</span></span>);
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">rentals</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
<span class="highlight-line added">    <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">show</span><span class="delimiter">'</span></span>);</span>
  });
});</pre></td>
</tr></table>
</div></div>
<!--
Our new route is nested within our `rentals` route.
This tells Ember that it is a sub-route and will be accessed through `localhost:4200/rentals/show`.
-->

<p>作成したルートは<code>rentals</code>ルート内に入れ子になっています。
これはEmberに、それが子ルートであり、<code>localhost:4200/rentals/show</code>を通してアクセスされることを伝えています。</p>

<!--
To tell the application which rental we want to access, we need to replace the `show` route path with the ID of the rental listing.
We also want to simplify the URL so that it looks more like this: `localhost:4200/rentals/id-for-rental`.
-->

<p>アプリケーションにアクセスしたい物件を伝えるには、物件のIDで<code>show</code>ルートのパスを置き換える必要があります。 
それと、URLは<code>localhost:4200/rentals/物件ID</code>のように簡略化させます。</p>

<!--
To do that, we modify our route as follows:
-->

<p>そのために、次のようにルートを修正します:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/router.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
<span class="highlight-line removed">5</span>
<span class="highlight-line added">6</span>
7
8</pre></td>
  <td class="code"><pre>Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">about</span><span class="delimiter">'</span></span>);
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">contact</span><span class="delimiter">'</span></span>);
  <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">rentals</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
<span class="highlight-line removed">    <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">show</span><span class="delimiter">'</span></span>);</span>
<span class="highlight-line added">    <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">show</span><span class="delimiter">'</span></span>, { <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">/:rental_id</span><span class="delimiter">'</span></span> });</span>
  });
});</pre></td>
</tr></table>
</div></div>
<!--
The `rental_id` will now be passed to the route.
-->

<p>これにより、<code>rental_id</code>がルートに渡されます。</p>

<!--
## Finding By ID
-->
<h2 id="toc_IDで検索" class="anchorable-toc">IDで検索</h2>
<!--
Next, we want to edit our `show` route to retrieve the requested rental:
-->

<p>次に、 <code>show</code>ルートを編集して、リクエストされた物件を取得します。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/rentals/show.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
<span class="highlight-line added">4</span>
<span class="highlight-line added">5</span>
<span class="highlight-line added">6</span>
7</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Route from <span class="string"><span class="delimiter">'</span><span class="content">@ember/routing/route</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Route.extend({
<span class="highlight-line added">  model(params) {</span>
<span class="highlight-line added">    <span class="keyword">return</span> <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">store</span><span class="delimiter">'</span></span>).findRecord(<span class="string"><span class="delimiter">'</span><span class="content">rental</span><span class="delimiter">'</span></span>, params.rental_id);</span>
<span class="highlight-line added">  }</span>
});</pre></td>
</tr></table>
</div></div>
<!--
Since we added `:rental_id` to the `show` path in our router, `rental_id` is now available in our `model` hook.
When we call `this.get('store').findRecord('rental', params.rental_id)`, Ember Data queries `/rentals/our-id` using a HTTP GET request ([learn more about that here](../../models/)).
-->

<p>ルータで、<code>show</code>のパスに<code>:rental_id</code>を追加したので、<code>model</code>フックで<code>rental_id</code>を利用できるようになりました。
<code>this.get(&#39;store&#39;).findRecord(&#39;rental&#39;, params.rental_id)</code>が呼ばれると、Ember DataはHTTP GETリクエスト<code>/rentals/物件ID</code>を発行します。(<a href="../../models/">詳細はこちら</a>)</p>

<!--
## Adding the Rental To Our Template
-->
<h2 id="toc_テンプレートに物件を追加する" class="anchorable-toc">テンプレートに物件を追加する</h2>
<!--
Next, we can update the template for our show route (`app/templates/rentals/show.hbs`) and list the information for our rental.
-->

<p>次に、<code>show</code>ルートのテンプレート(<code>app/templates/rentals/show.hbs</code>)を変更し、物件の詳細情報を表示します。</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/templates/rentals/show.hbs</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre><span class="highlight-line added">1</span>
<span class="highlight-line added">2</span>
<span class="highlight-line added">3</span>
<span class="highlight-line added">4</span>
<span class="highlight-line added">5</span>
<span class="highlight-line added">6</span>
<span class="highlight-line added">7</span>
<span class="highlight-line added">8</span>
<span class="highlight-line added">9</span>
<span class="highlight-line added"><strong>10</strong></span>
<span class="highlight-line added">11</span>
<span class="highlight-line added">12</span>
<span class="highlight-line added">13</span>
<span class="highlight-line added">14</span>
<span class="highlight-line added">15</span>
<span class="highlight-line added">16</span>
<span class="highlight-line added">17</span>
<span class="highlight-line added">18</span>
<span class="highlight-line added">19</span>
<span class="highlight-line removed"><strong>20</strong></span></pre></td>
  <td class="code"><pre><span class="highlight-line added"><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">jumbo show-listing</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></span>
<span class="highlight-line added">  <span class="tag">&lt;h2</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">title</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">model.title</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/h2&gt;</span></span>
<span class="highlight-line added">  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">right detail-section</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></span>
<span class="highlight-line added">    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">detail owner</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></span>
<span class="highlight-line added">      <span class="tag">&lt;strong&gt;</span>Owner:<span class="tag">&lt;/strong&gt;</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">model.owner</span><span class="inline-delimiter">}}</span></span></span>
<span class="highlight-line added">    <span class="tag">&lt;/div&gt;</span></span>
<span class="highlight-line added">    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">detail</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></span>
<span class="highlight-line added">      <span class="tag">&lt;strong&gt;</span>Type:<span class="tag">&lt;/strong&gt;</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental-property-type</span> <span class="attribute-name">model.category</span><span class="inline-delimiter">}}</span></span> - <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">model.category</span><span class="inline-delimiter">}}</span></span></span>
<span class="highlight-line added">    <span class="tag">&lt;/div&gt;</span></span>
<span class="highlight-line added">    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">detail</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></span>
<span class="highlight-line added">      <span class="tag">&lt;strong&gt;</span>Location:<span class="tag">&lt;/strong&gt;</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">model.city</span><span class="inline-delimiter">}}</span></span></span>
<span class="highlight-line added">    <span class="tag">&lt;/div&gt;</span></span>
<span class="highlight-line added">    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">detail</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></span>
<span class="highlight-line added">      <span class="tag">&lt;strong&gt;</span>Number of bedrooms:<span class="tag">&lt;/strong&gt;</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">model.bedrooms</span><span class="inline-delimiter">}}</span></span></span>
<span class="highlight-line added">    <span class="tag">&lt;/div&gt;</span></span>
<span class="highlight-line added">    <span class="tag">&lt;p</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">description</span><span class="delimiter">"</span></span><span class="tag">&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">model.description</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/p&gt;</span></span>
<span class="highlight-line added">  <span class="tag">&lt;/div&gt;</span></span>
<span class="highlight-line added">  <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">model.image</span><span class="inline-delimiter">}}</span></span><span class="string"><span class="delimiter">"</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">rental-pic</span><span class="delimiter">"</span></span><span class="tag">&gt;</span></span>
<span class="highlight-line added"><span class="tag">&lt;/div&gt;</span></span>
<span class="highlight-line removed"><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">outlet</span><span class="inline-delimiter">}}</span></span></span></pre></td>
</tr></table>
</div></div>
<!--
Now browse to `localhost:4200/rentals/grand-old-mansion` and you should see the information listed for that specific rental.
-->

<p><code>localhost:4200/rentals/grand-old-mansion</code>を参照すると、1物件の情報が表示されます。</p>

<p><img src="../../images/subroutes/subroutes-super-rentals-show.png" alt="Rental Page Nested Show Route"></p>

<!--
## Linking to a Specific Rental
-->
<h2 id="toc_物件詳細ページにリンクする" class="anchorable-toc">物件詳細ページにリンクする</h2>
<!--
Now that we can load pages for individual rentals, we'll add a link (using the `link-to` helper) within our `rental-listing` component to navigate to individual pages.
Here, the `link-to` helper takes the route name and the rental model object as arguments.
When you pass an object as second argument into the `link-to` block helper, it will by default [serialize](https://www.emberjs.com/api/ember/2.16/classes/Route/methods/beforeModel?anchor=serialize) the object to the ID of the model into the URL.
Alternately, you may just pass `rental.id` for clarity.
-->

<p>個々の物件のページを読み込むことができるようになりましたので、<code>rental-listing</code>コンポーネント内にリンク( <code>link-to</code>ヘルパーを使用)を追加して個々のページに遷移できるようにします。
<code>link-to</code>ヘルパーには、ルート名とRentalモデルのインスタンスを引数として渡します。
<code>link-to</code>ヘルパーの2番目の引数にオブジェクトを渡すると、デフォルトでモデルのIDがURLに<a href="https://www.emberjs.com/api/ember/2.16/classes/Route/methods/beforeModel?anchor=serialize">シアライズ</a>されます。
わかりやすくするために<code>rent.id</code>を渡すこともできます。</p>

<!--
Clicking on the title will load the detail page for that rental.
-->

<p>タイトルをクリックすると、その物件の詳細ページが読み込まれるようになります。</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/templates/components/rental-listing.hbs</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
<span class="highlight-line removed">6</span>
<span class="highlight-line added">7</span>
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22</pre></td>
  <td class="code"><pre><span class="tag">&lt;article</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">listing</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;a</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">action</span> <span class="error">'</span><span class="attribute-name">toggleImageSize</span><span class="error">'</span><span class="inline-delimiter">}}</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">image </span></span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">if</span> <span class="attribute-name">isWide</span> <span class="error">"</span><span class="attribute-name">wide</span><span class="error">"</span><span class="inline-delimiter">}}</span></span><span class="string"><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">"</span></span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental.image</span><span class="inline-delimiter">}}</span></span><span class="string"><span class="delimiter">"</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">"</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;small&gt;</span>View Larger<span class="tag">&lt;/small&gt;</span>
  <span class="tag">&lt;/a&gt;</span>
<span class="highlight-line removed">  <span class="tag">&lt;h3&gt;</span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental.title</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/h3&gt;</span></span>
<span class="highlight-line added">  <span class="tag">&lt;h3&gt;</span><span class="inline"><span class="inline-delimiter">{{#</span><span class="attribute-name">link-to</span> <span class="error">"</span><span class="attribute-name">rentals.show</span><span class="error">"</span> <span class="attribute-name">rental</span><span class="inline-delimiter">}}</span></span><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental.title</span><span class="inline-delimiter">}}</span></span><span class="inline"><span class="inline-delimiter">{{/</span><span class="attribute-name">link-to</span><span class="inline-delimiter">}}</span></span><span class="tag">&lt;/h3&gt;</span></span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">detail owner</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span&gt;</span>Owner:<span class="tag">&lt;/span&gt;</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental.owner</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">detail type</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span&gt;</span>Type:<span class="tag">&lt;/span&gt;</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental-property-type</span> <span class="attribute-name">rental.category</span><span class="inline-delimiter">}}</span></span>
      - <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental.category</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">detail location</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span&gt;</span>Location:<span class="tag">&lt;/span&gt;</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental.city</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">"</span><span class="content">detail bedrooms</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;span&gt;</span>Number of bedrooms:<span class="tag">&lt;/span&gt;</span> <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">rental.bedrooms</span><span class="inline-delimiter">}}</span></span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">location-map</span> <span class="attribute-name">location</span>=<span class="attribute-value">rental.city</span><span class="inline-delimiter">}}</span></span>
<span class="tag">&lt;/article&gt;</span></pre></td>
</tr></table>
</div></div>
<p><img src="../../images/subroutes/subroutes-super-rentals-index.png" alt="Rental Page Nested Index Route"></p>

<!--
At this point you can do a [deployment](../deploying/) and share your Super Rentals application to the world
or you can use this as a base to explore other Ember features and addons.
Regardless, we hope this has helped you get started with creating your own ambitious applications with Ember!
-->

<p>お疲れ様でした！
この時点であなたはEmberを使えるようになっているはずです。
Super Rentalsを<a href="../deploying/">デプロイ</a>して、世界中に共有したり、これをベースとして他のEmberの機能やアドオンを探索したりできますね。
これからEmberを使って野心的なアプリケーションの開発をする際、このチュートリアルがあなたの手助けになっていれば幸いです。</p>

<!--
### Acceptance Tests
-->
<h3 id="toc_受け入れテスト" class="anchorable-toc">受け入れテスト</h3>
<!--
We want to verify that we can click on a specific rental and load a detailed view to the page.
We'll click on the title and validate that an expanded description of the rental is shown. 
-->

<p>特定の物件をクリックしてページの詳細ページを読み込むことができることを確認したいと思います。
タイトルをクリックし、物件の詳細情報が表示されることを確認します。</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><?xml version="1.0"?>
<table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">/tests/acceptance/list-rentals-test.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
<span class="highlight-line added">2</span>
<span class="highlight-line added">3</span>
<span class="highlight-line added">4</span>
<span class="highlight-line added">5</span>
<span class="highlight-line added">6</span>
<span class="highlight-line added">7</span>
<span class="highlight-line added">8</span>
9</pre></td>
  <td class="code"><pre>test(<span class="string"><span class="delimiter">'</span><span class="content">should show details for a specific rental</span><span class="delimiter">'</span></span>, <span class="keyword">function</span> (assert) {
<span class="highlight-line added">  visit(<span class="string"><span class="delimiter">'</span><span class="content">/rentals</span><span class="delimiter">'</span></span>);</span>
<span class="highlight-line added">  click(<span class="string"><span class="delimiter">'</span><span class="content">a:contains("Grand Old Mansion")</span><span class="delimiter">'</span></span>);</span>
<span class="highlight-line added">  andThen(<span class="keyword">function</span>() {</span>
<span class="highlight-line added">    assert.equal(currentURL(), <span class="string"><span class="delimiter">'</span><span class="content">/rentals/grand-old-mansion</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">should navigate to show route</span><span class="delimiter">'</span></span>);</span>
<span class="highlight-line added">    assert.equal(find(<span class="string"><span class="delimiter">'</span><span class="content">.show-listing h2</span><span class="delimiter">'</span></span>).text(), <span class="string"><span class="delimiter">"</span><span class="content">Grand Old Mansion</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">should list rental title</span><span class="delimiter">'</span></span>);</span>
<span class="highlight-line added">    assert.equal(find(<span class="string"><span class="delimiter">'</span><span class="content">.description</span><span class="delimiter">'</span></span>).length, <span class="integer">1</span>, <span class="string"><span class="delimiter">'</span><span class="content">should list a description of the property</span><span class="delimiter">'</span></span>);</span>
<span class="highlight-line added">  });</span>
});</pre></td>
</tr></table>
</div></div>
<!--
At this point all our tests should pass, including the [list of acceptance tests](../acceptance-test) we created as our beginning requirements.
-->

<p>この時点で、最初に要件定義した受け入れテストを含む、すべてのテストがパスしているはずです。</p>

<p><img src="../../images/subroutes/all-acceptance-pass.png" alt="Acceptance Tests Pass"></p>



        
      <footer>
        <a class="previous-guide" href="../service/">サービスとユーティリティ</a> <a class="next-guide" href="../deploying/">デプロイ</a>
      </footer>
      
      </article>
    </main>

    <div class="footer">
  <div class="container">
    <div class="footer-info">
      Copyright 2018
      <a href="http://tilde.io">Tilde Inc.</a>
      <br>
      <a href="http://emberjs.com/team">コアチーム</a> |
      <a href="http://emberjs.com/sponsors">スポンサー</a>
      <br>
      <a href="http://emberjs.com/security">セキュリティ</a> |
      <a href="http://emberjs.com/legal">法関連</a> |
      <a href="http://emberjs.com/logos">ロゴ</a>
      <br>
      <a href="http://emberjs.com/guidelines">コミュニティガイドライン</a>
    </div>

    <div class="footer-statement">
      Ember.js is free, open source and always will be.
    </div>

    <div class="footer-social">
      <a href="http://twitter.com/emberjs"
        title="Twitter">
        <i class="icon-twitter"></i>
      </a>
      <a href="https://github.com/emberjs/ember.js"
        title="GitHub">
        <i class="icon-github"></i>
      </a>
      <a href="https://plus.google.com/communities/106387049790387471205"
        title="Google+">
        <i class="icon-gplus"></i>
      </a>
    </div>
  </div>
</div>


    

    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
